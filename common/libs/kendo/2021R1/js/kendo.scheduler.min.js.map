{"version":3,"sources":["kendo.scheduler.js"],"names":["f","define","$","normalizeText","text","String","replace","REPLACE_REGEX","SPACE","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","timezoneButtonText","model","message","startTimezone","endTimezone","appendTimezoneAttr","attrs","timezone","attr","appendValidDateValidator","validDateRule","validationRules","fields","field","validation","validDateValidator","isPlainObject","appendDateCompareValidator","dateCompareRule","dateCompare","wrapDataAccess","originalFunction","data","convertData","wrapDataSerialization","toString","call","ObservableArray","method","removeUid","event","idx","start","convert","end","uid","getOccurrenceByUid","applyZone","date","fromZone","toZone","remove","input","picker","filter","widgetInstance","ui","parseDate","val","format","dateCompareValidator","container","startInput","endInput","startPicker","endPicker","editable","closest","find","untilDateCompareValidator","untilPicker","until","expandAll","events","zone","concat","expand","trimOptions","overrideOptions","name","prefix","edit","add","navigate","createValidationAttributes","ruleName","rule","modelField","specialRules","datatype","inArray","isFunction","dropDownResourceEditor","resource","title","ns","appendTo","kendoDropDownList","dataTextField","dataValueField","dataSource","valuePrimitive","optionLabel","template","dataColorField","dropDownResourceEditorMobile","view","getter","descriptionEditor","multiSelectResourceEditor","kendoMultiSelect","itemTemplate","tagTemplate","multiSelectResourceEditorMobile","moveEventRange","distance","duration","getTime","Date","setTime","defaultCommands","editors","Editor","MobileEditor","PopupEditor","Scheduler","defaultViews","SCHEDULER_EXPORT","TimezoneEditor","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","MobileTimezoneEditor","MS_PER_DAY","getDate","getMilliseconds","recurrence","keys","F10","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","proxy","Object","prototype","isArray","NS","CLICK","MOUSEDOWN","TOUCHSTART","support","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","CHANGE","PROGRESS","ERROR","CANCEL","REMOVE","RESET","SAVE","ADD","EDIT","FOCUSEDSTATE","EXPANDEDSTATE","VIEWSSELECTOR","INVERSECOLORCLASS","valueStartEndBoundRegex","TODAY","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","DELETECONFIRM","DELETERECURRING","EDITRECURRING","DELETERECURRINGCONFIRM","RESETSERIESCONFIRM","DELETESERIESCONFIRM","COMMANDBUTTONTMPL","VIEWS_DROPDOWN_TEMPLATE","TOOLBARTEMPLATE","MOBILETOOLBARTEMPLATE","MOBILEDATERANGEEDITOR","isAllDay","dateTimeValidate","dateValidate","hide","DATERANGEEDITOR","RECURRENCEEDITOR","kendoRecurrenceEditor","messages","MOBILERECURRENCEEDITOR","kendoMobileRecurrenceEditor","pane","MOBILEISALLDAYEDITOR","MOBILETIMEZONEPOPUP","noTimezone","click","TIMEZONEPOPUP","timezoneEditorButton","MOBILETIMEZONEEDITOR","kendoMobileTimezoneEditor","TIMEZONEEDITOR","visible","toggle","kendoTimezoneEditor","SchedulerDataReader","schema","reader","serialize","errors","parse","total","groups","aggregates","SchedulerEvent","Model","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","offset","getTimezoneOffset","MS_PER_MINUTE","update","eventInfo","set","_startTime","_endTime","isMultiDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","id","toOccurrence","recurrenceException","obj","shouldSerialize","milliseconds","type","defaultValue","required","validDate","untilDateCompare","description","SchedulerDataSource","modelBase","endOffset","apply","logic","filters","operator","Query","toArray","cancelChanges","_removeExceptionDate","insert","index","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","item","shift","head","replaceRegExp","RegExp","toExceptionString","test","newException","create","Error","className","canceledit","destroy","imageClass","iconClass","mobile","dateRange","timezonePopUp","multipleResources","resources","desktop","Observable","element","createButton","toggleDateValidationHandler","_toggleDateValidation","e","isDateTimeInput","shouldValidate","bindAttribute","each","is","resourceIndex","preventDefault","_initTimezoneEditor","editor","allDayEvent","windows_zones","repeat","recurrenceEditor","multiple","_buildDesktopEditTemplate","editableFields","tmpl","settings","Template","templateSettings","paramName","html","separateTimezones","expr","_createEndTimezoneButton","_buildMobileEditTemplate","_buildEditTemplate","isMobile","unescape","_revertTimezones","_startTimezone","_endTimezone","arguments","Pane","wrap","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","parent","css","animations","left","right","close","unbind","timezoneView","content","kSwitch","endTimezoneRow","startTimezoneChange","enable","cancel","timezoneTitle","save","append","contentElement","show","on","editView","stopPropagation","hasClass","_editPane","bind","ev","checked","showDialog","actions","buttons","button","action","primary","kendoDialog","modal","preventScroll","closable","editEvent","resetSeriesBtn","deleteBtn","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","kendoEditable","clearContainer","target","validateOnBlur","trigger","_views","roleSelector","not","views","eq","purge","deleteText","kendoWindow","resizable","draggable","userTriggered","center","open","cycleForm","popup","_timezonePopup","buttonIndex","wrapper","currentTarget","focus","getKendoWindow","activator","wnd","checkbox","saveButton","cancelButton","timezonePopup","prop","timezoneEditorTitle","_initModel","_wrapper","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_selectable","_touchHandlers","_ariaId","guid","_createEditor","_unbindResize","off","dataItems","eventsCount","sortedData","_data","eventsUids","dict","eventsUidsLength","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","group","prevIndex","dataIndex","fieldValue","currentGroupIndex","select","selectedGroups","selectedEvents","slots","fieldName","groupsByResource","rangeStart","rangeEnd","ranges","selection","_selection","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","splice","groupedResources","_selectEvents","_select","_startDate","addDays","_endDate","timeSlotCollectionCount","toLocalDate","isDaySlot","currentGroup","daySlotCollectionCount","collIdx","dayCollIdx","eventsLength","isGrouped","getTimeSlotCollection","getDaySlotCollection","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","delta","amplitude","_amplitude","_dragging","selectable","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","mouseMoveHandler","_tabindex","_mouseMove","which","isRight","_selectFirstSlot","_ctrlKey","_shiftKey","relatedTarget","toolbar","removeClass","_keydown","ctrlKey","shiftKey","_activeElement","focusElement","currentUid","labelFormat","oldSelection","oldEventsLength","removeAttribute","removeAttr","ariaEventLabel","ariaSlotLabel","setAttribute","uids","occurrenceByUid","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","setTimeout","slot","startDate","endDate","selectionByElement","backward","_viewByIndex","itemToFocus","focusedViewName","viewByIndex","keyCode","prevSelection","isModifier","focusableToolBarSelector","focusableItems","viewsWrapper","shouldNavigate","focusedViewIndex","children","isRtl","isViewsDropDown","direction","_focusToolbar","TAB","addClass","_focusedView","ENTER","SPACEBAR","altKey","DOWN","RIGHT","LEFT","_showCalendar","ESC","moveToEvent","activeElement","getAttribute","addEvent","DELETE","removeEvent","move","inRange","blur","_selectedViewName","_adjustSelectedDate","indexOf","_updateSelection","dataItem","indexOfEvent","_updateEventForSelection","_timeSlotInterval","autoBind","snap","allDaySlot","min","max","workWeekStart","workWeekEnd","workDays","showWorkHours","startTime","endTime","currentTimeMarker","updateInterval","useLocalTimezone","footer","today","pdf","deleteWindowTitle","next","previous","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","orientation","resourceDS","_refreshHandler","_progressHandler","_errorHandler","_resourceRefreshHandler","_resourceProgressHandler","_resourceErrorHandler","calendar","_editor","_moveDraggable","_resizeDraggable","_model","setDataSource","fetch","_selectedView","siblings","startSlot","endSlot","startResources","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","movable","android","Draggable","ignore","holdToDrag","autoScroll","evtClone","evtCloneElement","isTouch","_eventOptionsForMove","inverseColor","_slotByPosition","x","startLocation","y","startOffset","range","slotIndex","targetSlotElement","location","top","_updateMoveHint","endResources","prevented","evt","updatedEventOptions","eventOptions","_removeMoveHint","stringify","_isMultiDrag","_updateEvent","sync","cancelHold","handle","directions","k-resize-e","k-resize-w","k-resize-n","k-resize-s","dragstart","dragHandle","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","recurrenceHead","getByUid","updateSeries","updateOccurrence","eventUid","exception","_showRecurringDialog","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","command","commandName","_set","_attemptRefresh","refresh","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","deleteOccurrenceConfirmation","createExceptionConfirmation","seriesCallback","occurrenceCallback","exeptionCallback","currentModel","deleteOccurrence","deleteSeries","createException","deleteRecurring","_unbindView","angular","elements","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","switchWorkDay","isWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","viewsDropdown","viewButtons","viewSelect","_renderView","_viewsCount","prepend","toLowerCase","rebind","viewName","_initializeView","mouseAndTouchPresent","dateForTitle","shortDateForTitle","mobileDateForTitle","force","getSize","currentSize","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","defaultView","selected","hasType","allDay","time","resourceFetchArray","_preventRebind","forEach","when","then","_requestStart","_error","_progress","progress","resourcePromises","_resourceDataSource","groupName","promises","dataSourceInstance","_bindResourceEvents","isResourceGrouped","_refreshResource","preventRefresh","observable","formattedDate","formattedShortDate","commands","grep","search","viewsCount","saveAsPDF","throttle","timezoneOffset","currentDate","nextDate","previousDate","targetElm","anchor","activate","_toggleResize","change","copyAnchorStyles","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","resourcesBySlot","plugin","PDFMixin","_drawPDF","scheduler","promise","table","styles","Deferred","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","dataBound","other_zone","_bindZones","_filter","_options","_zonePickerLabel","zoneSelect","after","zonePicker","zone_value"],"mappings":"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","file":"kendo.scheduler.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (!text) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.scheduler', [\n        'kendo.dropdownlist',\n        'kendo.editable',\n        'kendo.multiselect',\n        'kendo.window',\n        'kendo.datetimepicker',\n        'kendo.scheduler.recurrence',\n        'kendo.scheduler.view',\n        'kendo.scheduler.dayview',\n        'kendo.scheduler.agendaview',\n        'kendo.scheduler.monthview',\n        'kendo.scheduler.timelineview',\n        'kendo.dialog',\n        'kendo.pane',\n        'kendo.pdf',\n        'kendo.switch'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'scheduler',\n        name: 'Scheduler',\n        category: 'web',\n        description: 'The Scheduler is an event calendar.',\n        depends: [\n            'dropdownlist',\n            'editable',\n            'multiselect',\n            'window',\n            'datepicker',\n            'datetimepicker',\n            'scheduler.recurrence',\n            'scheduler.view'\n        ],\n        features: [\n            {\n                id: 'scheduler-dayview',\n                name: 'Scheduler Day View',\n                description: 'Scheduler Day View',\n                depends: ['scheduler.dayview']\n            },\n            {\n                id: 'scheduler-agendaview',\n                name: 'Scheduler Agenda View',\n                description: 'Scheduler Agenda View',\n                depends: ['scheduler.agendaview']\n            },\n            {\n                id: 'scheduler-monthview',\n                name: 'Scheduler Month View',\n                description: 'Scheduler Month View',\n                depends: ['scheduler.monthview']\n            },\n            {\n                id: 'scheduler-timelineview',\n                name: 'Scheduler Timeline View',\n                description: 'Scheduler Timeline View',\n                depends: ['scheduler.timelineview']\n            },\n            {\n                id: 'scheduler-mobile',\n                name: 'Scheduler adaptive rendering',\n                description: 'Support for adaptive rendering',\n                depends: [\n                    'dialog',\n                    'pane',\n                    'switch'\n                ]\n            },\n            {\n                id: 'scheduler-pdf-export',\n                name: 'PDF export',\n                description: 'Export the scheduler events as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            },\n            {\n                id: 'scheduler-timezones',\n                name: 'Timezones',\n                description: 'Allow selecting timezones different than Etc/UTC',\n                depends: ['timezones']\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, date = kendo.date, MS_PER_DAY = date.MS_PER_DAY, getDate = date.getDate, getMilliseconds = kendo.date.getMilliseconds, recurrence = kendo.recurrence, keys = $.extend({ F10: 121 }, kendo.keys), ui = kendo.ui, Widget = ui.Widget, DataBoundWidget = ui.DataBoundWidget, STRING = 'string', Popup = ui.Popup, Calendar = ui.Calendar, DataSource = kendo.data.DataSource, isPlainObject = $.isPlainObject, extend = $.extend, proxy = $.proxy, toString = Object.prototype.toString, isArray = $.isArray, NS = '.kendoScheduler', CLICK = 'click', MOUSEDOWN = 'mousedown', TOUCHSTART = kendo.support.pointers ? 'pointerdown' : 'touchstart', TOUCHMOVE = kendo.support.pointers ? 'pointermove' : 'touchmove', TOUCHEND = kendo.support.pointers ? 'pointerup' : 'touchend', MOUSEMOVE = kendo.support.mousemove, CHANGE = 'change', PROGRESS = 'progress', ERROR = 'error', CANCEL = 'cancel', REMOVE = 'remove', RESET = 'resetSeries', SAVE = 'save', ADD = 'add', EDIT = 'edit', FOCUSEDSTATE = 'k-state-focused', EXPANDEDSTATE = 'k-state-expanded', VIEWSSELECTOR = '.k-scheduler-views', INVERSECOLORCLASS = 'k-event-inverse', valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/, TODAY = getDate(new Date()), EXCEPTION_SEPARATOR = ',', OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g, RECURRENCE_EXCEPTION = 'recurrenceException', DELETECONFIRM = 'Are you sure you want to delete this event?', DELETERECURRING = 'Do you want to delete only this event occurrence or the whole series?', EDITRECURRING = 'Do you want to edit only this event occurrence or the whole series?', DELETERECURRINGCONFIRM = 'Are you sure you want to delete this event occurrence?', RESETSERIESCONFIRM = 'Are you sure you want to reset the whole series?', DELETESERIESCONFIRM = 'Are you sure you want to delete the whole series?', COMMANDBUTTONTMPL = '<button type=\"button\" class=\"k-button #=className#\" #=attr#><span class=\"k-button-text\">#=text#</span></button>', VIEWS_DROPDOWN_TEMPLATE = kendo.template('' + '<select class=\"k-dropdown k-views-dropdown\">' + '#for (var view in views) {#' + '<option value=\"#= view #\">${views[view].title}</option>' + '#}#' + '</select>'), TOOLBARTEMPLATE = kendo.template('' + '<div class=\"k-scheduler-toolbar k-toolbar\">' + '# if (pdf) { #' + '<button class=\"k-button k-pdf\"><span class=\"k-icon k-i-file-pdf\"></span><span class=\"k-button-text\">${messages.pdf}</span></button>' + '# } #' + '<span class=\"k-scheduler-navigation k-button-group\">' + '<button class=\"k-button k-nav-today\" title=\"${messages.today}\"><span class=\"k-button-text\">${messages.today}</span></button>' + '<button class=\"k-button k-button-icon k-icon-button k-nav-prev\" title=\"${messages.previous}\" aria-label=\"${messages.previous}\"><span class=\"k-icon k-i-arrow-60-left\"></span></button>' + '<button class=\"k-button k-button-icon k-icon-button k-nav-next\" title=\"${messages.next}\" aria-label=\"${messages.next}\"><span class=\"k-icon k-i-arrow-60-right\"></span></button>' + '</span>' + '<a role=\"button\" href=\"\\\\#\" class=\"k-nav-current\">' + '<span class=\"k-icon k-i-calendar\"></span>' + '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' + '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' + '</a>' + '<span class=\"k-spacer k-toolbar-spacer\"></span>' + '# if (search) { #' + '<span class=\"k-scheduler-search k-textbox\">' + '<input autocomplete=\"off\" placeholder=\"Search...\" title=\"Search...\" class=\"k-input k-scheduler-search-input\" />' + '<span class=\"k-input-icon\"><span class=\"k-icon k-i-search\"></span></span>' + '</span>' + '# } #' + '# if (viewsCount === 1) { #' + '<a role=\"button\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-icon k-icon-button k-scheduler-refresh\">' + '<span class=\"k-icon k-i-reload\"></span>' + '</a>' + '# } else { #' + '<span class=\"k-scheduler-views-wrapper\">' + '<span class=\"k-scheduler-views k-button-group\">' + '# for (var view in views) { #' + '<button type=\"button\" class=\"k-button k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\">${views[view].title}</button>' + '# } #' + '</span>' + '</span>' + '# } #' + '</div>'), MOBILETOOLBARTEMPLATE = kendo.template('<div class=\"k-scheduler-toolbar k-toolbar\">' + '<span class=\"k-scheduler-tools k-button-group\">' + '# if (pdf) { #' + '<button type=\"button\" class=\"k-button k-icon-button k-button-icon k-pdf\"><span class=\"k-icon k-i-file-pdf\"></span></button>' + '# } #' + '<button type=\"button\" class=\"k-button k-icon-button k-button-icon k-nav-calendar\"><span class=\"k-icon k-i-calendar\"></span></button>' + '# if (editable) { #' + '<button type=\"button\" class=\"k-button k-icon-button k-button-icon k-create-event\"><span class=\"k-icon k-i-plus\"></span></button>' + '# } #' + '</span>' + '<span class=\"k-spacer k-toolbar-spacer\"></span>' + '# if (search) { #' + '<span class=\"k-scheduler-search k-textbox\">' + '<input autocomplete=\"off\" placeholder=\"Search...\" title=\"Search...\" class=\"k-scheduler-search-input\" />' + '<span class=\"k-input-icon\"><span class=\"k-icon k-i-search\"></span></span>' + '</span>' + '# } #' + '#if(viewsCount === 1){#' + '<a role=\"button\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-icon k-icon-button k-scheduler-refresh\">' + '<span class=\"k-icon k-i-reload\"></span>' + '</a>' + '#} else {#' + '<select class=\"k-dropdown k-scheduler-mobile-views\">' + '#for(var view in views){#' + '<option class=\"k-view-#= view.toLowerCase() #\" value=\"#=view#\">${views[view].title}</option>' + '#}#' + '</select>' + '#}#' + '</div>' + '<div class=\"k-scheduler-toolbar k-toolbar\">' + '<span class=\"k-scheduler-navigation\">' + '<button class=\"k-button k-button-icon k-icon-button k-nav-prev\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></button>' + '<span class=\"k-state-default k-nav-current\">' + '<span class=\"k-m-date-format\" data-#=ns#bind=\"text: formattedMobileDate\"></span>' + '<span class=\"k-y-date-format\" data-#=ns#bind=\"text: formattedYear\"></span>' + '</span>' + '<button class=\"k-button k-button-icon k-icon-button k-nav-next\"><span class=\"k-icon k-i-arrow-chevron-right\"></span></button>' + '</span>' + '</div>'), MOBILEDATERANGEEDITOR = function (container, options) {\n                var attr = {\n                    name: options.field,\n                    title: options.title\n                };\n                var isAllDay = options.model.isAllDay;\n                var dateTimeValidate = kendo.attr('validate') + '=\\'' + !isAllDay + '\\'';\n                var dateValidate = kendo.attr('validate') + '=\\'' + isAllDay + '\\'';\n                appendTimezoneAttr(attr, options);\n                appendValidDateValidator(attr, options);\n                appendDateCompareValidator(attr, options);\n                $('<input type=\"datetime-local\" required ' + kendo.attr('type') + '=\"datetime-local\" ' + kendo.attr('bind') + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n                $('<input type=\"date\" required ' + kendo.attr('type') + '=\"date\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n                $('<span ' + kendo.attr('for') + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            }, DATERANGEEDITOR = function (container, options) {\n                var attr = {\n                        name: options.field,\n                        title: options.title\n                    }, isAllDay = options.model.isAllDay, dateTimeValidate = kendo.attr('validate') + '=\\'' + !isAllDay + '\\' ', dateValidate = kendo.attr('validate') + '=\\'' + isAllDay + '\\' ';\n                appendTimezoneAttr(attr, options);\n                appendValidDateValidator(attr, options);\n                appendDateCompareValidator(attr, options);\n                $('<input type=\"text\" required ' + kendo.attr('type') + '=\"date\"' + ' ' + kendo.attr('role') + '=\"datetimepicker\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n                $('<input type=\"text\" required ' + kendo.attr('type') + '=\"date\"' + ' ' + kendo.attr('role') + '=\"datepicker\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n                $('<span ' + kendo.attr('bind') + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n                if (options.field === 'end') {\n                    $('<span ' + kendo.attr('bind') + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n                }\n                $('<span ' + kendo.attr('for') + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            }, RECURRENCEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n            }, MOBILERECURRENCEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n            }, MOBILEISALLDAYEDITOR = function (container, options) {\n                $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').appendTo(container);\n            }, MOBILETIMEZONEPOPUP = function (container, options) {\n                var text = timezoneButtonText(options.model, options.messages.noTimezone);\n                $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n                $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>').appendTo(container);\n                container.closest('li.k-item label').click(options.click);\n            }, TIMEZONEPOPUP = function (container, options) {\n                $('<a href=\"#\" class=\"k-button\" data-bind=\"invisible:isAllDay\">' + options.messages.timezoneEditorButton + '</a>').click(options.click).appendTo(container);\n            }, MOBILETIMEZONEEDITOR = function (container, options) {\n                $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoMobileTimezoneEditor({ optionLabel: options.noTimezone });\n            }, TIMEZONEEDITOR = function (container, options) {\n                var visible = options.visible || options.visible === undefined;\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).toggle(visible).appendTo(container).kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n            };\n        function timezoneButtonText(model, message) {\n            message = message || '';\n            if (model.startTimezone) {\n                message = model.startTimezone;\n                if (model.endTimezone) {\n                    message += ' | ' + model.endTimezone;\n                }\n            }\n            return message;\n        }\n        function appendTimezoneAttr(attrs, options) {\n            var timezone = options.timezone;\n            if (timezone) {\n                attrs[kendo.attr('timezone')] = timezone;\n            }\n        }\n        function appendValidDateValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n            if (validationRules) {\n                var validDateRule = validationRules.validDateValidator;\n                if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                    attrs[kendo.attr('validDate-msg')] = validDateRule.message;\n                }\n            }\n        }\n        function appendDateCompareValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n            if (validationRules) {\n                var dateCompareRule = validationRules.dateCompare;\n                if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                    attrs[kendo.attr('dateCompare-msg')] = dateCompareRule.message;\n                }\n            }\n        }\n        function wrapDataAccess(originalFunction, timezone) {\n            return function (data) {\n                data = originalFunction(data);\n                convertData(data, 'apply', timezone);\n                return data || [];\n            };\n        }\n        function wrapDataSerialization(originalFunction, timezone) {\n            return function (data) {\n                if (data) {\n                    if (toString.call(data) !== '[object Array]' && !(data instanceof kendo.data.ObservableArray)) {\n                        data = [data];\n                    }\n                }\n                convertData(data, 'remove', timezone, true);\n                data = originalFunction(data);\n                return data || [];\n            };\n        }\n        function convertData(data, method, timezone, removeUid) {\n            var event, idx, length;\n            data = data || [];\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                event = data[idx];\n                if (removeUid) {\n                    if (event.startTimezone || event.endTimezone) {\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                            event.start = kendo.timezone[method](event.start, timezone);\n                            event.end = kendo.timezone[method](event.end, timezone);\n                        } else {\n                            event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                            event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        }\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                } else {\n                    if (event.startTimezone || event.endTimezone) {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                        }\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                }\n                if (removeUid) {\n                    delete event.uid;\n                }\n            }\n            return data;\n        }\n        function getOccurrenceByUid(data, uid) {\n            var length = data.length, idx = 0, event;\n            for (; idx < length; idx++) {\n                event = data[idx];\n                if (event.uid === uid) {\n                    return event;\n                }\n            }\n        }\n        var SchedulerDataReader = kendo.Class.extend({\n            init: function (schema, reader) {\n                var timezone = schema.timezone;\n                this.reader = reader;\n                if (reader.model) {\n                    this.model = reader.model;\n                }\n                this.timezone = timezone;\n                this.data = wrapDataAccess($.proxy(this.data, this), timezone);\n                this.serialize = wrapDataSerialization($.proxy(this.serialize, this), timezone);\n            },\n            errors: function (data) {\n                return this.reader.errors(data);\n            },\n            parse: function (data) {\n                return this.reader.parse(data);\n            },\n            data: function (data) {\n                return this.reader.data(data);\n            },\n            total: function (data) {\n                return this.reader.total(data);\n            },\n            groups: function (data) {\n                return this.reader.groups(data);\n            },\n            aggregates: function (data) {\n                return this.reader.aggregates(data);\n            },\n            serialize: function (data) {\n                return this.reader.serialize(data);\n            }\n        });\n        function applyZone(date, fromZone, toZone) {\n            if (toZone) {\n                date = kendo.timezone.convert(date, fromZone, toZone);\n            } else {\n                date = kendo.timezone.remove(date, fromZone);\n            }\n            return date;\n        }\n        function validDateValidator(input) {\n            if (input.filter('[name=start]').length && input.filter('[title=Start]').length || input.filter('[name=end]').length && input.filter('[title=End]').length || input.filter('.k-recur-until').length) {\n                var date;\n                var picker = kendo.widgetInstance(input, kendo.ui);\n                if (picker) {\n                    date = kendo.parseDate(input.val(), picker.options.format);\n                    return !!date && picker.value();\n                } else {\n                    date = kendo.parseDate(input.val());\n                    return !!date;\n                }\n            }\n            return true;\n        }\n        function dateCompareValidator(input) {\n            if (input.filter('[name=end]').length) {\n                var container = input.closest('.k-scheduler-edit-form');\n                var startInput = container.find('[name=start]:visible');\n                var endInput = container.find('[name=end]:visible');\n                if (endInput[0] && startInput[0]) {\n                    var start, end;\n                    var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                    var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n                    var editable = container.data('kendoEditable');\n                    var model = editable ? editable.options.model : null;\n                    if (startPicker && endPicker) {\n                        start = startPicker.value();\n                        end = endPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                        end = kendo.parseDate(endInput.val());\n                    }\n                    if (start && end) {\n                        if (model) {\n                            var timezone = startInput.attr(kendo.attr('timezone'));\n                            var startTimezone = model.startTimezone;\n                            var endTimezone = model.endTimezone;\n                            startTimezone = startTimezone || endTimezone;\n                            endTimezone = endTimezone || startTimezone;\n                            if (startTimezone) {\n                                start = applyZone(start, startTimezone, timezone);\n                                end = applyZone(end, endTimezone, timezone);\n                            }\n                        }\n                        return start <= end;\n                    }\n                }\n            }\n            return true;\n        }\n        function untilDateCompareValidator(input) {\n            var untilPicker, until, container, startInput, start, startPicker;\n            if (input.filter('.k-recur-until').length) {\n                untilPicker = kendo.widgetInstance(input, kendo.ui);\n                until = untilPicker.value();\n                container = input.closest('.k-scheduler-edit-form');\n                startInput = container.find('[name=start]:visible');\n                if (startInput[0]) {\n                    startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                    if (startPicker) {\n                        start = startPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                    }\n                    if (start && until) {\n                        return start <= until;\n                    }\n                }\n            }\n            return true;\n        }\n        var SchedulerEvent = kendo.data.Model.define({\n            init: function (value) {\n                var that = this;\n                kendo.data.Model.fn.init.call(that, value);\n                that._defaultId = that.defaults[that.idField];\n            },\n            _time: function (field) {\n                var date = this[field];\n                var fieldTime = '_' + field + 'Time';\n                if (this[fieldTime]) {\n                    return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n                }\n                return getMilliseconds(date);\n            },\n            _date: function (field) {\n                var fieldTime = '_' + field + 'Time';\n                if (this[fieldTime]) {\n                    return this[fieldTime] - this._time(field);\n                }\n                return kendo.date.getDate(this[field]);\n            },\n            clone: function (options, updateUid) {\n                var uid = this.uid, event = new this.constructor($.extend({}, this.toJSON(), options));\n                if (!updateUid) {\n                    event.uid = uid;\n                }\n                return event;\n            },\n            duration: function () {\n                var end = this.end;\n                var start = this.start;\n                var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n                return end - start - offset;\n            },\n            expand: function (start, end, zone) {\n                return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n            },\n            update: function (eventInfo) {\n                for (var field in eventInfo) {\n                    this.set(field, eventInfo[field]);\n                }\n                if (this._startTime) {\n                    this.set('_startTime', kendo.date.toUtcTime(this.start));\n                }\n                if (this._endTime) {\n                    this.set('_endTime', kendo.date.toUtcTime(this.end));\n                }\n            },\n            isMultiDay: function () {\n                return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n            },\n            isException: function () {\n                return !this.isNew() && this.recurrenceId;\n            },\n            isOccurrence: function () {\n                return this.isNew() && this.recurrenceId;\n            },\n            isRecurring: function () {\n                return !!(this.recurrenceRule || this.recurrenceId);\n            },\n            isRecurrenceHead: function () {\n                return !!(this.id && this.recurrenceRule);\n            },\n            toOccurrence: function (options) {\n                options = $.extend(options, {\n                    recurrenceException: null,\n                    recurrenceRule: null,\n                    recurrenceId: this.id || this.recurrenceId\n                });\n                options[this.idField] = this.defaults[this.idField];\n                return this.clone(options, true);\n            },\n            toJSON: function () {\n                var obj = kendo.data.Model.fn.toJSON.call(this);\n                obj.uid = this.uid;\n                delete obj._startTime;\n                delete obj._endTime;\n                return obj;\n            },\n            shouldSerialize: function (field) {\n                return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== '_defaultId';\n            },\n            set: function (key, value) {\n                var isAllDay = this.isAllDay || false;\n                kendo.data.Model.fn.set.call(this, key, value);\n                if (key == 'isAllDay' && value != isAllDay) {\n                    var start = kendo.date.getDate(this.start);\n                    var end = new Date(this.end);\n                    var milliseconds = kendo.date.getMilliseconds(end);\n                    if (milliseconds === 0 && value) {\n                        milliseconds = MS_PER_DAY;\n                    }\n                    this.set('start', start);\n                    if (value === true) {\n                        kendo.date.setTime(end, -milliseconds);\n                        if (end < start) {\n                            end = start;\n                        }\n                    } else {\n                        kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                    }\n                    this.set('end', end);\n                }\n            },\n            id: 'id',\n            fields: {\n                id: { type: 'number' },\n                title: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                start: {\n                    type: 'date',\n                    validation: {\n                        required: true,\n                        validDate: { value: validDateValidator }\n                    }\n                },\n                startTimezone: { type: 'string' },\n                end: {\n                    type: 'date',\n                    validation: {\n                        required: true,\n                        validDate: { value: validDateValidator },\n                        dateCompare: { value: dateCompareValidator }\n                    }\n                },\n                endTimezone: { type: 'string' },\n                recurrenceRule: {\n                    defaultValue: '',\n                    type: 'string',\n                    validation: {\n                        validDate: { value: validDateValidator },\n                        untilDateCompare: { value: untilDateCompareValidator }\n                    }\n                },\n                recurrenceException: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                isAllDay: {\n                    type: 'boolean',\n                    defaultValue: false\n                },\n                description: { type: 'string' }\n            }\n        });\n        var SchedulerDataSource = DataSource.extend({\n            init: function (options) {\n                DataSource.fn.init.call(this, extend(true, {}, {\n                    schema: {\n                        modelBase: SchedulerEvent,\n                        model: SchedulerEvent\n                    }\n                }, options));\n                this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n            },\n            expand: function (start, end) {\n                var data = this.view(), filter = {}, endOffset;\n                if (start && end) {\n                    endOffset = end.getTimezoneOffset();\n                    end = new Date(end.getTime() + MS_PER_DAY - 1);\n                    if (end.getTimezoneOffset() !== endOffset) {\n                        end = kendo.timezone.apply(end, endOffset);\n                    }\n                    filter = {\n                        logic: 'or',\n                        filters: [\n                            {\n                                logic: 'and',\n                                filters: [\n                                    {\n                                        field: 'start',\n                                        operator: 'gte',\n                                        value: start\n                                    },\n                                    {\n                                        field: 'end',\n                                        operator: 'gte',\n                                        value: start\n                                    },\n                                    {\n                                        field: 'start',\n                                        operator: 'lte',\n                                        value: end\n                                    }\n                                ]\n                            },\n                            {\n                                logic: 'and',\n                                filters: [\n                                    {\n                                        field: 'start',\n                                        operator: 'lte',\n                                        value: new Date(start.getTime() + MS_PER_DAY - 1)\n                                    },\n                                    {\n                                        field: 'end',\n                                        operator: 'gte',\n                                        value: start\n                                    }\n                                ]\n                            }\n                        ]\n                    };\n                    data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n                }\n                return data;\n            },\n            cancelChanges: function (model) {\n                if (model && model.isOccurrence()) {\n                    this._removeExceptionDate(model);\n                }\n                DataSource.fn.cancelChanges.call(this, model);\n            },\n            insert: function (index, model) {\n                if (!model) {\n                    return;\n                }\n                if (!(model instanceof SchedulerEvent)) {\n                    var eventInfo = model;\n                    model = this._createNewModel();\n                    model.accept(eventInfo);\n                }\n                if (!this._pushCreated && model.isRecurrenceHead() || model.recurrenceId) {\n                    model = model.recurrenceId ? model : model.toOccurrence();\n                    this._addExceptionDate(model);\n                }\n                return DataSource.fn.insert.call(this, index, model);\n            },\n            pushCreate: function (items) {\n                this._pushCreated = true;\n                DataSource.fn.pushCreate.call(this, items);\n                this._pushCreated = false;\n            },\n            remove: function (model) {\n                if (model.isRecurrenceHead()) {\n                    this._removeExceptions(model);\n                } else if (model.isRecurring()) {\n                    this._addExceptionDate(model);\n                }\n                return DataSource.fn.remove.call(this, model);\n            },\n            _removeExceptions: function (model) {\n                var data = this.data().slice(0), item = data.shift(), id = model.id;\n                while (item) {\n                    if (item.recurrenceId === id) {\n                        DataSource.fn.remove.call(this, item);\n                    }\n                    item = data.shift();\n                }\n                model.set(RECURRENCE_EXCEPTION, '');\n            },\n            _removeExceptionDate: function (model) {\n                if (model.recurrenceId) {\n                    var head = this.get(model.recurrenceId);\n                    if (head) {\n                        var start = model.defaults.start;\n                        var replaceRegExp = new RegExp('(\\\\' + EXCEPTION_SEPARATOR + '?)' + recurrence.toExceptionString(start, this.reader.timezone));\n                        var recurrenceException = (head.recurrenceException || '').replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, '');\n                        if (replaceRegExp.test(recurrenceException)) {\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, ''));\n                        } else {\n                            start = model.start;\n                            replaceRegExp = new RegExp('(\\\\' + EXCEPTION_SEPARATOR + '?)' + recurrence.toExceptionString(start, this.reader.timezone));\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, ''));\n                        }\n                    }\n                }\n            },\n            _addExceptionDate: function (model) {\n                var start = model.start;\n                var zone = this.reader.timezone;\n                var head = this.get(model.recurrenceId);\n                var recurrenceException = (head.recurrenceException || '').replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, '');\n                if (!recurrence.isException(recurrenceException, start, zone)) {\n                    var newException = recurrence.toExceptionString(start, zone);\n                    model.defaults.start = start;\n                    head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : '') + newException);\n                }\n            }\n        });\n        function expandAll(events, start, end, zone) {\n            var length = events.length, data = [], idx = 0;\n            for (; idx < length; idx++) {\n                data = data.concat(events[idx].expand(start, end, zone));\n            }\n            return data;\n        }\n        SchedulerDataSource.create = function (options) {\n            if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n                options = { data: options };\n            }\n            var dataSource = options || {}, data = dataSource.data;\n            dataSource.data = data;\n            if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n                throw new Error('Incorrect DataSource type. Only SchedulerDataSource instances are supported');\n            }\n            return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n        };\n        extend(true, kendo.data, {\n            SchedulerDataSource: SchedulerDataSource,\n            SchedulerDataReader: SchedulerDataReader,\n            SchedulerEvent: SchedulerEvent\n        });\n        var defaultCommands = {\n            update: {\n                text: 'Save',\n                className: 'k-primary k-scheduler-update'\n            },\n            canceledit: {\n                text: 'Cancel',\n                className: 'k-scheduler-cancel'\n            },\n            destroy: {\n                text: 'Delete',\n                imageClass: 'k-i-close',\n                className: 'k-primary k-scheduler-delete',\n                iconClass: 'k-icon'\n            }\n        };\n        function trimOptions(options, overrideOptions) {\n            delete options.name;\n            delete options.prefix;\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n            for (var key in overrideOptions) {\n                options[key] = overrideOptions[key];\n            }\n            return options;\n        }\n        function createValidationAttributes(model, field) {\n            var modelField = (model.fields || model)[field];\n            var specialRules = [\n                'url',\n                'email',\n                'number',\n                'date',\n                'boolean'\n            ];\n            var validation = modelField ? modelField.validation : {};\n            var datatype = kendo.attr('type');\n            var inArray = $.inArray;\n            var ruleName;\n            var rule;\n            var attr = {};\n            for (ruleName in validation) {\n                rule = validation[ruleName];\n                if (inArray(ruleName, specialRules) >= 0) {\n                    attr[datatype] = ruleName;\n                } else if (!kendo.isFunction(rule)) {\n                    attr[ruleName] = isPlainObject(rule) ? rule.value || ruleName : rule;\n                }\n                attr[kendo.attr(ruleName + '-msg')] = rule.message;\n            }\n            return attr;\n        }\n        function dropDownResourceEditor(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                $(kendo.format('<select data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource,\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: 'None',\n                    template: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField)\n                });\n            };\n        }\n        function dropDownResourceEditorMobile(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var options = '';\n                var view = resource.dataSource.view();\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n                }\n                $(kendo.format('<select data-{0}bind=\"value:{1}\">{2}</select>', kendo.ns, resource.field, options, resource.valuePrimitive)).appendTo(container).attr(attr);\n            };\n        }\n        function descriptionEditor(options) {\n            var attr = createValidationAttributes(options.model, options.field);\n            return function (container, model) {\n                $('<textarea name=\"description\" class=\"k-textarea\" title=\"' + model.title + '\"/>').attr(attr).appendTo(container);\n            };\n        }\n        function multiSelectResourceEditor(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                $(kendo.format('<select data-{0}bind=\"value:{1}\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource,\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField),\n                    tagTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField)\n                });\n            };\n        }\n        function multiSelectResourceEditorMobile(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var options = '';\n                var view = resource.dataSource.view();\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n                }\n                $(kendo.format('<select data-{0}bind=\"value:{1}\" multiple=\"multiple\" data-{0}value-primitive=\"{3}\">{2}</select>', kendo.ns, resource.field, options, resource.valuePrimitive)).appendTo(container).attr(attr);\n            };\n        }\n        function moveEventRange(event, distance) {\n            var duration = event.end.getTime() - event.start.getTime();\n            var start = new Date(event.start.getTime());\n            kendo.date.setTime(start, distance);\n            var end = new Date(start.getTime());\n            kendo.date.setTime(end, duration, true);\n            return {\n                start: start,\n                end: end\n            };\n        }\n        var editors = {\n            mobile: {\n                dateRange: MOBILEDATERANGEEDITOR,\n                timezonePopUp: MOBILETIMEZONEPOPUP,\n                timezone: MOBILETIMEZONEEDITOR,\n                recurrence: MOBILERECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditorMobile,\n                resources: dropDownResourceEditorMobile,\n                isAllDay: MOBILEISALLDAYEDITOR\n            },\n            desktop: {\n                dateRange: DATERANGEEDITOR,\n                timezonePopUp: TIMEZONEPOPUP,\n                timezone: TIMEZONEEDITOR,\n                recurrence: RECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditor,\n                resources: dropDownResourceEditor\n            }\n        };\n        var Editor = kendo.Observable.extend({\n            init: function (element, options) {\n                kendo.Observable.fn.init.call(this);\n                this.element = element;\n                this.options = extend(true, {}, this.options, options);\n                this.createButton = this.options.createButton;\n                this.toggleDateValidationHandler = proxy(this._toggleDateValidation, this);\n            },\n            _toggleDateValidation: function (e) {\n                if (e.field == 'isAllDay') {\n                    var container = this.container, isAllDay = this.editable.options.model.isAllDay, bindAttribute = kendo.attr('bind'), element, isDateTimeInput, shouldValidate;\n                    container.find('[' + bindAttribute + '*=end],[' + bindAttribute + '*=start]').each(function () {\n                        element = $(this);\n                        if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                            isDateTimeInput = element.is('[' + kendo.attr('role') + '=datetimepicker],[type*=datetime]');\n                            shouldValidate = isAllDay !== isDateTimeInput;\n                            element.attr(kendo.attr('validate'), shouldValidate);\n                        }\n                    });\n                }\n            },\n            fields: function (editors, model) {\n                var that = this;\n                var messages = that.options.messages;\n                var timezone = that.options.timezone;\n                var click = function (e) {\n                    e.preventDefault();\n                    that._initTimezoneEditor(model, this);\n                };\n                var fields = [\n                    {\n                        field: 'title',\n                        title: messages.editor.title\n                    },\n                    {\n                        field: 'start',\n                        title: messages.editor.start,\n                        editor: editors.dateRange,\n                        timezone: timezone\n                    },\n                    {\n                        field: 'end',\n                        title: messages.editor.end,\n                        editor: editors.dateRange,\n                        timezone: timezone\n                    },\n                    {\n                        field: 'isAllDay',\n                        title: messages.editor.allDayEvent,\n                        editor: editors.isAllDay\n                    }\n                ];\n                if (kendo.timezone.windows_zones) {\n                    fields.push({\n                        field: 'timezone',\n                        title: messages.editor.timezone,\n                        editor: editors.timezonePopUp,\n                        click: click,\n                        messages: messages.editor,\n                        model: model\n                    });\n                    fields.push({\n                        field: 'startTimezone',\n                        title: messages.editor.startTimezone,\n                        editor: editors.timezone,\n                        noTimezone: messages.editor.noTimezone\n                    });\n                    fields.push({\n                        field: 'endTimezone',\n                        title: messages.editor.endTimezone,\n                        editor: editors.timezone,\n                        noTimezone: messages.editor.noTimezone\n                    });\n                }\n                if (!model.recurrenceId) {\n                    fields.push({\n                        field: 'recurrenceRule',\n                        title: messages.editor.repeat,\n                        editor: editors.recurrence,\n                        timezone: timezone,\n                        messages: messages.recurrenceEditor,\n                        pane: this.pane\n                    });\n                }\n                if ('description' in model) {\n                    fields.push({\n                        field: 'description',\n                        title: messages.editor.description,\n                        editor: editors.description({\n                            model: model,\n                            field: 'description'\n                        })\n                    });\n                }\n                for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                    var resource = this.options.resources[resourceIndex];\n                    fields.push({\n                        field: resource.field,\n                        title: resource.title,\n                        editor: resource.multiple ? editors.multipleResources(resource, model) : editors.resources(resource, model)\n                    });\n                }\n                return fields;\n            },\n            end: function () {\n                return this.editable.end();\n            },\n            _buildDesktopEditTemplate: function (model, fields, editableFields) {\n                var messages = this.options.messages;\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var html = '';\n                for (var idx = 0, length = fields.length; idx < length; idx++) {\n                    var field = fields[idx];\n                    if (field.field === 'startTimezone') {\n                        html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                        html += '<div class=\"k-edit-form-container\">';\n                        html += '<div class=\"k-edit-label\"></div>';\n                        html += '<div class=\"k-edit-field\"><label class=\"k-check\"><input class=\"k-timezone-toggle\" type=\"checkbox\" />' + messages.editor.separateTimezones + '</label></div>';\n                    }\n                    html += '<div class=\"k-edit-label\"><label for=\"' + field.field + '\">' + (field.title || field.field || '') + '</label></div>';\n                    if (!model.editable || model.editable(field.field)) {\n                        editableFields.push(field);\n                        html += '<div ' + kendo.attr('container-for') + '=\"' + field.field + '\" class=\"k-edit-field\"></div>';\n                    } else {\n                        var tmpl = '#:';\n                        if (field.field) {\n                            field = kendo.expr(field.field, paramName);\n                            tmpl += field + '==null?\\'\\':' + field;\n                        } else {\n                            tmpl += '\\'\\'';\n                        }\n                        tmpl += '#';\n                        tmpl = kendo.template(tmpl, settings);\n                        html += '<div class=\"k-edit-field\">' + tmpl(model) + '</div>';\n                    }\n                    if (field.field === 'endTimezone') {\n                        html += this._createEndTimezoneButton();\n                    }\n                }\n                return html;\n            },\n            _buildMobileEditTemplate: function (model, fields, editableFields) {\n                var messages = this.options.messages;\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var html = '';\n                html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                for (var idx = 0, length = fields.length; idx < length; idx++) {\n                    var field = fields[idx];\n                    if (field.field === 'timezone' || field.field === 'recurrenceRule') {\n                        html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                    }\n                    if (field.field === 'startTimezone') {\n                        html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                        html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                        html += '<li class=\"k-item k-listgroup-item\">';\n                        html += '<label class=\"k-label k-listgroup-form-row\">';\n                        html += '<span class=\"k-item-title k-listgroup-form-row\">' + messages.editor.separateTimezones + '</span>';\n                        html += '<span class=\"k-listgroup-form-field-wrapper\">';\n                        html += '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />';\n                        html += '</span>';\n                        html += '</label>';\n                        html += '</li>';\n                    }\n                    if (!model.editable || model.editable(field.field)) {\n                        html += '<li class=\"k-item k-listgroup-item\">';\n                        if (field.field === 'timezone') {\n                            html += '<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-state-disabled: isAllDay }\">';\n                        } else {\n                            html += '<label class=\"k-label k-listgroup-form-row\">';\n                        }\n                        html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || '') + '</span>';\n                        editableFields.push(field);\n                        html += '<div class=\"k-listgroup-form-field-wrapper\" ' + kendo.attr('container-for') + '=\"' + field.field + '\"></div>';\n                        html += '</label></li>';\n                    } else {\n                        var tmpl = '#:';\n                        html += '<li class=\"k-item k-listgroup-item\">';\n                        html += '<label class=\"k-label k-no-click k-listgroup-form-row\">';\n                        html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || '') + '</span>';\n                        if (field.field) {\n                            field = kendo.expr(field.field, paramName);\n                            tmpl += field + '==null?\\'\\':' + field;\n                        } else {\n                            tmpl += '\\'\\'';\n                        }\n                        tmpl += '#';\n                        tmpl = kendo.template(tmpl, settings);\n                        html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                        html += '</label></li>';\n                    }\n                    if (field.field === 'recurrenceRule') {\n                        html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                    }\n                    if (field.field === 'endTimezone') {\n                        html += '</ul></div>';\n                    }\n                }\n                html += '</ul>';\n                return html;\n            },\n            _buildEditTemplate: function (model, fields, editableFields, isMobile) {\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var template = this.options.editable.template;\n                var html = '';\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n                    html += kendo.template(template, settings)(model);\n                } else if (isMobile) {\n                    html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n                } else {\n                    html += this._buildDesktopEditTemplate(model, fields, editableFields);\n                }\n                return html;\n            },\n            _createEndTimezoneButton: function () {\n                return '</ul></div>';\n            },\n            _revertTimezones: function (model) {\n                model.set('startTimezone', this._startTimezone);\n                model.set('endTimezone', this._endTimezone);\n                delete this._startTimezone;\n                delete this._endTimezone;\n            }\n        });\n        var MobileEditor = Editor.extend({\n            init: function () {\n                Editor.fn.init.apply(this, arguments);\n                this.pane = kendo.Pane.wrap(this.element, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n                this.pane.element.parent().css('height', this.options.height);\n                this.view = this.pane.view();\n            },\n            options: {\n                animations: {\n                    left: 'slide',\n                    right: 'slide:right'\n                }\n            },\n            destroy: function () {\n                this.close();\n                this.unbind();\n                this.pane.destroy();\n            },\n            _initTimezoneEditor: function (model) {\n                var that = this;\n                var pane = that.pane;\n                var messages = that.options.messages;\n                var timezoneView = that.timezoneView;\n                var container = timezoneView ? timezoneView.content.find('.k-scheduler-timezones') : that.container.find('.k-scheduler-timezones');\n                var kSwitch = container.find('input.k-timezone-toggle').data('kendoSwitch');\n                var endTimezoneRow = container.find('li.k-item:not(.k-zonepicker):last');\n                var startTimezoneChange = function (e) {\n                    if (e.field === 'startTimezone') {\n                        var value = model.startTimezone;\n                        kSwitch.enable(value);\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set('endTimezone', '');\n                            kSwitch.value(false);\n                        }\n                    }\n                };\n                that._startTimezone = model.startTimezone || '';\n                that._endTimezone = model.endTimezone || '';\n                if (!timezoneView) {\n                    var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' + 'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + messages.editor.timezoneTitle + '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.save + '\" ' + 'aria-label=\"' + messages.save + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div><div data-role=\"content\"></div>';\n                    this.timezoneView = timezoneView = pane.append(html);\n                    timezoneView.contentElement.append(container.show());\n                    timezoneView.element.on(CLICK + NS, '.k-scheduler-cancel, .k-scheduler-update', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if ($(this).hasClass('k-scheduler-cancel')) {\n                            that._revertTimezones(model);\n                        }\n                        var editView = that._editPane;\n                        var text = timezoneButtonText(model, messages.editor.noTimezone);\n                        editView.content.find('.k-timezone-label').text(text);\n                        pane.navigate(editView, that.options.animations.right);\n                    });\n                    kSwitch.bind('change', function (ev) {\n                        endTimezoneRow.toggle(ev.checked);\n                        model.set('endTimezone', '');\n                    });\n                    model.bind('change', startTimezoneChange);\n                }\n                kSwitch.value(!!model.endTimezone);\n                kSwitch.enable(!!model.startTimezone);\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n                pane.navigate(timezoneView, that.options.animations.left);\n            },\n            showDialog: function (options) {\n                var actions = options.buttons.map(function (button) {\n                    return {\n                        text: button.text,\n                        action: button.click\n                    };\n                });\n                actions.push({\n                    text: this.options.messages.cancel,\n                    primary: true\n                });\n                $('<div />').appendTo(document.body).kendoDialog({\n                    close: function () {\n                        this.destroy();\n                    },\n                    modal: { preventScroll: true },\n                    closable: false,\n                    title: false,\n                    content: options.text,\n                    actions: actions\n                });\n            },\n            editEvent: function (model) {\n                var pane = this.pane;\n                var html = '';\n                var messages = this.options.messages;\n                var updateText = messages.save;\n                var removeText = messages.destroy;\n                var cancelText = messages.cancel;\n                var titleText = messages.editor.editorTitle;\n                var resetSeries = messages.resetSeries;\n                html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr('uid') + '=\"' + model.uid + '\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + cancelText + '\"' + 'aria-label=\"' + cancelText + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + titleText + '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + updateText + '\" ' + 'aria-label=\"' + updateText + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>';\n                var fields = this.fields(editors.mobile, model);\n                var that = this;\n                var editableFields = [];\n                html += this._buildEditTemplate(model, fields, editableFields, true);\n                html += '</div>';\n                var view = pane.append(html);\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                    view.contentElement.append(resetSeriesBtn);\n                }\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                    var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                    view.contentElement.append(deleteBtn);\n                }\n                this._editPane = view;\n                var container = this.container = view.element;\n                this.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    target: that.options.target,\n                    validateOnBlur: true\n                }).data('kendoEditable');\n                if (!this.trigger('edit', {\n                        container: container,\n                        model: model\n                    })) {\n                    container.on(CLICK + NS, 'a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        var button = $(this);\n                        if (!button.hasClass('k-scheduler-edit')) {\n                            var name = 'cancel';\n                            if (button.hasClass('k-scheduler-update')) {\n                                name = 'save';\n                            } else if (button.hasClass('k-scheduler-delete')) {\n                                name = 'remove';\n                            } else if (button.hasClass('k-scheduler-resetSeries')) {\n                                name = RESET;\n                            }\n                            that.trigger(name, {\n                                container: container,\n                                model: model\n                            });\n                        } else {\n                            pane.navigate(this._editPane, that.options.animations.right);\n                        }\n                    });\n                    pane.navigate(view, that.options.animations.left);\n                    model.bind('change', that.toggleDateValidationHandler);\n                } else {\n                    this.trigger('cancel', {\n                        container: container,\n                        model: model\n                    });\n                }\n                return this.editable;\n            },\n            _views: function () {\n                return this.pane.element.find(kendo.roleSelector('view')).not(this.view.element);\n            },\n            close: function () {\n                if (this.container) {\n                    this.pane.navigate('', this.options.animations.right);\n                    var views = this._views();\n                    var view;\n                    for (var idx = 0, length = views.length; idx < length; idx++) {\n                        view = views.eq(idx).data('kendoView');\n                        if (view) {\n                            view.purge();\n                        }\n                    }\n                    views.remove();\n                    this.container = null;\n                    if (this.editable) {\n                        this.editable.options.model.unbind('change', this.toggleDateValidationHandler);\n                        this.editable.destroy();\n                        this.editable = null;\n                    }\n                    this.timezoneView = null;\n                }\n            }\n        });\n        var PopupEditor = Editor.extend({\n            destroy: function () {\n                this.close();\n                this.unbind();\n            },\n            editEvent: function (model) {\n                var that = this;\n                var editable = that.options.editable;\n                var html = '<div ' + kendo.attr('uid') + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n                var messages = that.options.messages;\n                var updateText = messages.save;\n                var cancelText = messages.cancel;\n                var deleteText = messages.destroy;\n                var resetSeries = messages.resetSeries;\n                var fields = this.fields(editors.desktop, model);\n                var editableFields = [];\n                html += this._buildEditTemplate(model, fields, editableFields, false);\n                var attr;\n                var options = isPlainObject(editable) ? editable.window : {};\n                html += '<div class=\"k-edit-buttons k-state-default\">';\n                html += this.createButton({\n                    name: 'update',\n                    text: updateText,\n                    attr: attr\n                }) + this.createButton({\n                    name: 'canceledit',\n                    text: cancelText,\n                    attr: attr\n                });\n                if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    html += this.createButton({\n                        name: 'resetSeries',\n                        text: resetSeries,\n                        attr: attr\n                    });\n                }\n                if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                    html += this.createButton({\n                        name: 'delete',\n                        text: deleteText,\n                        attr: attr\n                    });\n                }\n                html += '</div></div></div>';\n                var container = this.container = $(html).appendTo(that.element).eq(0).kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function (e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, {\n                                    container: container,\n                                    model: model\n                                })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n                that.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                }).data('kendoEditable');\n                if (!that.trigger(EDIT, {\n                        container: container,\n                        model: model\n                    })) {\n                    container.data('kendoWindow').center().open();\n                    container.on(CLICK + NS, 'button.k-scheduler-cancel', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(CANCEL, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'button.k-scheduler-update', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger('save', {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'button.k-scheduler-delete', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(REMOVE, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'button.k-scheduler-resetSeries', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(RESET, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    kendo.cycleForm(container);\n                    model.bind('change', that.toggleDateValidationHandler);\n                } else {\n                    that.trigger(CANCEL, {\n                        container: container,\n                        model: model\n                    });\n                }\n                return that.editable;\n            },\n            close: function () {\n                var that = this;\n                var destroy = function () {\n                    if (that.editable) {\n                        that.editable.options.model.unbind('change', that.toggleDateValidationHandler);\n                        that.editable.destroy();\n                        that.editable = null;\n                        that.container = null;\n                    }\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup = null;\n                    }\n                };\n                if (that.editable) {\n                    if (that._timezonePopup && that._timezonePopup.data('kendoWindow')) {\n                        that._timezonePopup.data('kendoWindow').destroy();\n                        that._timezonePopup = null;\n                    }\n                    if (that.container.is(':visible')) {\n                        that.container.data('kendoWindow').bind('deactivate', destroy).close();\n                    } else {\n                        destroy();\n                    }\n                } else {\n                    destroy();\n                }\n            },\n            _createEndTimezoneButton: function () {\n                var messages = this.options.messages;\n                var html = '';\n                html += '<div class=\"k-edit-buttons k-state-default\">';\n                html += this.createButton({\n                    name: 'savetimezone',\n                    text: messages.save\n                }) + this.createButton({\n                    name: 'canceltimezone',\n                    text: messages.cancel\n                });\n                html += '</div></div></div>';\n                return html;\n            },\n            showDialog: function (options) {\n                var html = kendo.format('<div class=\\'k-popup-edit-form\\'><div class=\\'k-edit-form-container\\'><p class=\\'k-popup-message\\'>{0}</p>', options.text);\n                html += '<div class=\"k-edit-buttons k-state-default\">';\n                for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                    html += this.createButton(options.buttons[buttonIndex]);\n                }\n                html += '</div></div></div>';\n                var wrapper = this.element;\n                if (this.popup) {\n                    this.popup.destroy();\n                }\n                var popup = this.popup = $(html).appendTo(wrapper).eq(0).on(CLICK, '.k-button', function (e) {\n                    e.preventDefault();\n                    popup.close();\n                    var buttonIndex = $(e.currentTarget).index();\n                    options.buttons[buttonIndex].click();\n                }).kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: false,\n                    title: options.title,\n                    visible: false,\n                    close: function () {\n                        this.destroy();\n                        wrapper.focus();\n                    }\n                }).getKendoWindow();\n                popup.center().open();\n            },\n            _initTimezoneEditor: function (model, activator) {\n                var that = this;\n                var container = that.container.find('.k-scheduler-timezones');\n                var checkbox = container.find('input.k-timezone-toggle');\n                var endTimezoneRow = container.find('.k-edit-label:last').add(container.find('.k-edit-field:last'));\n                var saveButton = container.find('.k-scheduler-savetimezone');\n                var cancelButton = container.find('.k-scheduler-canceltimezone');\n                var timezonePopup = that._timezonePopup;\n                var startTimezoneChange = function (e) {\n                    if (e.field === 'startTimezone') {\n                        var value = model.startTimezone;\n                        checkbox.prop('disabled', !value);\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set('endTimezone', '');\n                            checkbox.prop('checked', false);\n                        }\n                    }\n                };\n                var wnd;\n                that._startTimezone = model.startTimezone;\n                that._endTimezone = model.endTimezone;\n                if (!timezonePopup) {\n                    that._timezonePopup = timezonePopup = container.kendoWindow({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.editor.timezoneEditorTitle,\n                        visible: false,\n                        close: function (e) {\n                            model.unbind('change', startTimezoneChange);\n                            if (e.userTriggered) {\n                                that._revertTimezones(model);\n                            }\n                            if (activator) {\n                                activator.focus();\n                            }\n                        }\n                    });\n                    checkbox.click(function () {\n                        endTimezoneRow.toggle(checkbox.prop('checked'));\n                        model.set('endTimezone', '');\n                    });\n                    saveButton.click(function (e) {\n                        e.preventDefault();\n                        wnd.close();\n                    });\n                    cancelButton.click(function (e) {\n                        e.preventDefault();\n                        that._revertTimezones(model);\n                        wnd.close();\n                    });\n                    model.bind('change', startTimezoneChange);\n                }\n                checkbox.prop('checked', model.endTimezone).prop('disabled', !model.startTimezone);\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n                wnd = timezonePopup.data('kendoWindow');\n                wnd.center().open();\n            }\n        });\n        var Scheduler = DataBoundWidget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                if (!that.options.views || !that.options.views.length) {\n                    that.options.views = [\n                        'day',\n                        'week'\n                    ];\n                }\n                that.resources = [];\n                that._initModel();\n                that._wrapper();\n                that._views();\n                that._toolbar();\n                that._dataSource();\n                that._resources();\n                that._resizeHandler = function () {\n                    that.resize();\n                };\n                that.wrapper.on(MOUSEDOWN + NS + ' selectstart' + NS, function (e) {\n                    if (!$(e.target).is(':kendoFocusable')) {\n                        e.preventDefault();\n                    }\n                });\n                if (that.options.editable && that.options.editable.resize !== false) {\n                    that._resizable();\n                }\n                that._movable();\n                that._bindResize();\n                if (that.options.messages && that.options.messages.recurrence) {\n                    recurrence.options = that.options.messages.recurrence;\n                }\n                that._selectable();\n                that._touchHandlers();\n                that._ariaId = kendo.guid();\n                that._createEditor();\n            },\n            _bindResize: function () {\n                $(window).on('resize' + NS, this._resizeHandler);\n            },\n            _unbindResize: function () {\n                $(window).off('resize' + NS, this._resizeHandler);\n            },\n            dataItems: function () {\n                var that = this;\n                var items = that.items();\n                var events = that._data;\n                var eventsUids = $.map(items, function (item) {\n                    return $(item).attr('data-uid');\n                });\n                var i;\n                var key;\n                var dict = {};\n                var eventsUidsLength = eventsUids.length;\n                for (i = 0; i < eventsUidsLength; i++) {\n                    dict[eventsUids[i]] = null;\n                }\n                var eventsCount = events.length;\n                for (i = 0; i < eventsCount; i++) {\n                    var event = events[i];\n                    if (dict[event.uid] !== undefined) {\n                        dict[event.uid] = event;\n                    }\n                }\n                var sortedData = [];\n                for (key in dict) {\n                    sortedData.push(dict[key]);\n                }\n                return sortedData;\n            },\n            _isMobile: function () {\n                var options = this.options;\n                return options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n            },\n            _isTouch: function (event) {\n                return /touch/.test(event.type) || event.originalEvent && /touch/.test(event.originalEvent.pointerType);\n            },\n            _isInverseColor: function (eventElement) {\n                return eventElement.hasClass(INVERSECOLORCLASS);\n            },\n            _groupsByResource: function (resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n                if (!groupsArray) {\n                    groupsArray = [];\n                }\n                var resource = resources[0];\n                if (resource) {\n                    var group;\n                    var data = resource.dataSource.view();\n                    var prevIndex = 0;\n                    for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                        var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                        var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n                        group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                        group[resource.field] = fieldValue;\n                        prevIndex = group.groupIndex;\n                        if (parentField && parentFieldValue) {\n                            group[parentField] = parentFieldValue;\n                        }\n                        if (resources.length === 1) {\n                            group.groupIndex = groupIndex + dataIndex;\n                            groupsArray.push(group);\n                        }\n                    }\n                    return group;\n                } else {\n                    return {};\n                }\n            },\n            data: function () {\n                return this._data;\n            },\n            select: function (options) {\n                var that = this;\n                var view = that.view();\n                var selection = that._selection;\n                var groups = view.groups;\n                var selectedGroups;\n                if (options === undefined) {\n                    var selectedEvents;\n                    var slots = view._selectedSlots;\n                    if (!selection) {\n                        return [];\n                    }\n                    if (selection && selection.events) {\n                        selectedEvents = that._selectedEvents();\n                    }\n                    return {\n                        start: selection.start,\n                        end: selection.end,\n                        events: selectedEvents,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    };\n                }\n                if (!options) {\n                    that._selection = null;\n                    that._old = null;\n                    view.clearSelection();\n                    return;\n                }\n                if ($.isArray(options)) {\n                    options = { events: options.splice(0) };\n                }\n                if (options.resources) {\n                    var fieldName;\n                    var filters = [];\n                    var groupsByResource = [];\n                    if (view.groupedResources) {\n                        that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                    }\n                    for (fieldName in options.resources) {\n                        filters.push({\n                            field: fieldName,\n                            operator: 'eq',\n                            value: options.resources[fieldName]\n                        });\n                    }\n                    selectedGroups = new kendo.data.Query(groupsByResource).filter(filters).toArray();\n                }\n                if (options.events && options.events.length) {\n                    that._selectEvents(options.events, selectedGroups);\n                    that._select();\n                    return;\n                }\n                if (groups && (options.start && options.end)) {\n                    var rangeStart = getDate(view._startDate);\n                    var rangeEnd = kendo.date.addDays(getDate(view._endDate), 1);\n                    var group;\n                    var ranges;\n                    if (options.start < rangeEnd && rangeStart <= options.end) {\n                        if (selectedGroups && selectedGroups.length) {\n                            group = groups[selectedGroups[0].groupIndex];\n                        } else {\n                            group = groups[0];\n                        }\n                        if (!group.timeSlotCollectionCount()) {\n                            options.isAllDay = true;\n                        }\n                        ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n                        if (ranges.length) {\n                            that._selection = {\n                                start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                                end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                                groupIndex: ranges[0].start.groupIndex,\n                                index: ranges[0].start.index,\n                                isAllDay: ranges[0].start.isDaySlot,\n                                events: []\n                            };\n                            that._select();\n                        }\n                    }\n                }\n            },\n            _selectEvents: function (eventsUids, selectedGroups) {\n                var that = this;\n                var idx;\n                var view = that.view();\n                var groups = view.groups;\n                var eventsLength = eventsUids.length;\n                var isGrouped = selectedGroups && selectedGroups.length;\n                for (idx = 0; idx < eventsLength; idx++) {\n                    if (groups && isGrouped) {\n                        var currentGroup = groups[selectedGroups[0].groupIndex];\n                        var events = [];\n                        var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                        var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n                        for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                            events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                        }\n                        for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                            events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                        }\n                        events = new kendo.data.Query(events).filter({\n                            field: 'element[0].getAttribute(\\'data-uid\\')',\n                            operator: 'eq',\n                            value: eventsUids[idx]\n                        }).toArray();\n                        if (events[0]) {\n                            that._createSelection(events[0].element);\n                        }\n                    } else {\n                        var element = view.element.find(kendo.format('.k-event[data-uid={0}], .k-task[data-uid={0}]', eventsUids[idx]));\n                        if (element.length) {\n                            that._createSelection(element[0]);\n                        }\n                    }\n                }\n            },\n            _touchHandlers: function () {\n                var that = this;\n                var startX;\n                var startY;\n                var endX;\n                var endY;\n                var timeStamp;\n                var wrapper = that.wrapper;\n                var touchMoveHandler = $.proxy(that._touchMove, that);\n                wrapper.on(TOUCHSTART + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    var content = that.wrapper.find('.k-scheduler-content');\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n                    content.stop(true, false);\n                    that._touchPosX = startX = that._tapPosition(e, 'X');\n                    that._touchPosY = startY = that._tapPosition(e, 'Y');\n                    that._userTouched = true;\n                    that.view()._scrolling = false;\n                    timeStamp = Date.now();\n                    wrapper.on(TOUCHMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', touchMoveHandler);\n                });\n                wrapper.on(TOUCHEND + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n                    var delta = Date.now() - timeStamp;\n                    var content = that.wrapper.find('.k-scheduler-content');\n                    var amplitude = -that._amplitude * (3000 / delta);\n                    endX = that._tapPosition(e, 'X');\n                    endY = that._tapPosition(e, 'Y');\n                    if (that._dragging) {\n                        return;\n                    }\n                    if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                        that._mouseDownSelection(e);\n                    }\n                    if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                        content.animate({ scrollTop: content[0].scrollTop + amplitude });\n                    }\n                    wrapper.off(TOUCHMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', touchMoveHandler);\n                });\n            },\n            _selectable: function () {\n                var that = this;\n                var wrapper = that.wrapper;\n                if (!that.options.selectable) {\n                    return;\n                }\n                that._tabindex();\n                wrapper.on(MOUSEDOWN + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    that._mouseDownSelection(e);\n                });\n                var mouseMoveHandler = $.proxy(that._mouseMove, that);\n                wrapper.on(MOUSEDOWN + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', function (e) {\n                    var which = e.which;\n                    var button = e.button;\n                    var isRight = which && which === 3 || button && button == 2;\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    if (!isRight) {\n                        wrapper.on(MOUSEMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', mouseMoveHandler);\n                    }\n                });\n                wrapper.on('mouseup' + NS + ' mousecancel' + NS, function () {\n                    wrapper.off(MOUSEMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', mouseMoveHandler);\n                });\n                wrapper.on('focus' + NS, function () {\n                    if (!that._selection && !that._userTouched) {\n                        that._selectFirstSlot();\n                    }\n                    that._select();\n                });\n                wrapper.on('focusout' + NS, function (e) {\n                    that._ctrlKey = that._shiftKey = false;\n                    if (!$(e.relatedTarget).closest(VIEWSSELECTOR).length) {\n                        that.toolbar.find(VIEWSSELECTOR).removeClass(EXPANDEDSTATE);\n                    }\n                });\n                wrapper.on('keydown' + NS, proxy(that._keydown, that));\n                wrapper.on('keyup' + NS, function (e) {\n                    that._ctrlKey = e.ctrlKey;\n                    that._shiftKey = e.shiftKey;\n                });\n            },\n            _mouseDownSelection: function (e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n                if (!isRight) {\n                    if (e.ctrlKey) {\n                        this._ctrlKey = e.ctrlKey;\n                    }\n                    if (e.shiftKey) {\n                        this._shiftKey = e.shiftKey;\n                    }\n                    this._createSelection(e.currentTarget);\n                }\n                if (kendo._activeElement() !== this.wrapper.get(0)) {\n                    kendo.focusElement(this.wrapper);\n                } else {\n                    this._select();\n                }\n                if (this.toolbar) {\n                    this.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n            },\n            _selectFirstSlot: function () {\n                this._createSelection(this.wrapper.find('.k-scheduler-content').find('td:first'));\n            },\n            _select: function () {\n                var that = this;\n                var view = that.view();\n                var wrapper = that.wrapper;\n                var current = view.current();\n                var selection = that._selection;\n                var oldSelection = that._old ? that._old.selection : null;\n                var oldEventsLength = that._old ? that._old.eventsLength : null;\n                if (!selection) {\n                    return;\n                }\n                if (current) {\n                    current.removeAttribute('id');\n                    current.removeAttribute('aria-label');\n                    wrapper.removeAttr('aria-activedescendant');\n                }\n                view.select(selection);\n                current = view.current();\n                if (current && (oldSelection !== current || selection.events && oldEventsLength !== selection.events.length)) {\n                    var currentUid = $(current).data('uid');\n                    if (that._old && currentUid && currentUid === $(that._old.selection).data('uid') && (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n                    var labelFormat;\n                    var data = selection;\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n                    if (events[0]) {\n                        data = events[0] || selection;\n                        labelFormat = kendo.format(that.options.messages.ariaEventLabel, data.title, data.start, data.start);\n                    } else {\n                        labelFormat = kendo.format(that.options.messages.ariaSlotLabel, data.start, data.end);\n                    }\n                    current.setAttribute('id', that._ariaId);\n                    current.setAttribute('aria-label', labelFormat);\n                    wrapper.attr('aria-activedescendant', that._ariaId);\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length\n                    };\n                    that.trigger('change', {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            },\n            _selectedEvents: function () {\n                var uids = this._selection.events;\n                var length = uids.length;\n                var idx = 0;\n                var event;\n                var events = [];\n                for (; idx < length; idx++) {\n                    event = this.occurrenceByUid(uids[idx]);\n                    if (event) {\n                        events.push(event);\n                    }\n                }\n                return events;\n            },\n            _tapPosition: function (event, coordinate) {\n                return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n            },\n            _touchMove: function (e) {\n                var that = this;\n                var content = that.wrapper.find('.k-scheduler-content');\n                var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n                var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n                var endY = that._tapPosition(e, 'Y');\n                var endX = that._tapPosition(e, 'X');\n                var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n                var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n                var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n                var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n                if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                    return;\n                }\n                if (applyVerticalScroll || applyhorizontalScroll) {\n                    that._amplitude = Math.round(endY - that._touchPosY);\n                    that._touchPosY = endY;\n                    that._touchPosX = endX;\n                    content.animate({\n                        scrollTop: scrollTop,\n                        scrollLeft: scrollLeft\n                    }, 0);\n                    that.view()._scrolling = true;\n                }\n            },\n            _mouseMove: function (e) {\n                var that = this;\n                clearTimeout(that._moveTimer);\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._moveTimer = setTimeout(function () {\n                    var view = that.view();\n                    var selection = that._selection;\n                    if (selection) {\n                        var slot = view.selectionByElement($(e.currentTarget));\n                        if (slot && selection.groupIndex === slot.groupIndex) {\n                            var startDate = slot.startDate();\n                            var endDate = slot.endDate();\n                            if (startDate >= selection.end) {\n                                selection.backward = false;\n                            } else if (endDate <= selection.start) {\n                                selection.backward = true;\n                            }\n                            if (selection.backward) {\n                                selection.start = startDate;\n                            } else {\n                                selection.end = endDate;\n                            }\n                            that._select();\n                        }\n                    }\n                }, 5);\n            },\n            _viewByIndex: function (index) {\n                var view, views = this.views;\n                for (view in views) {\n                    if (!index) {\n                        return view;\n                    }\n                    index--;\n                }\n            },\n            _keydown: function (e) {\n                var that = this, key = e.keyCode, view = that.view(), editable = view.options.editable, selection = that._selection, prevSelection = $.extend(selection), isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92, focusableToolBarSelector = '> .k-button,' + '.k-scheduler-navigation > .k-button,' + '.k-nav-current,' + '.k-views-dropdown:visible,' + '.k-scheduler-views > .k-button', focusableItems = that.toolbar.find(focusableToolBarSelector), viewsWrapper = that.toolbar.find(VIEWSSELECTOR), shouldNavigate = $(e.target).closest(VIEWSSELECTOR).length || that.toolbar.find('.k-scheduler-views .k-state-focused').length, focusedViewIndex = viewsWrapper.children().index(that.toolbar.find('.' + FOCUSEDSTATE)), isRtl = kendo.support.isRtl(that.element), isViewsDropDown = $(e.target).is('.k-views-dropdown'), direction = isRtl ? -1 : 1;\n                if (focusedViewIndex == -1) {\n                    focusedViewIndex = viewsWrapper.children().index(that.toolbar.find('.k-state-selected'));\n                }\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n                if (key === keys.F10) {\n                    that._focusToolbar();\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.TAB) {\n                    if (that.toolbar.find('.' + FOCUSEDSTATE).length) {\n                        var idx = focusableItems.index(that.toolbar.find('.' + FOCUSEDSTATE));\n                        var itemToFocus = e.shiftKey ? focusableItems[idx - 1] : focusableItems[idx + 1];\n                        that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        if (itemToFocus) {\n                            $(itemToFocus).addClass(FOCUSEDSTATE).focus();\n                            that._focusedView = null;\n                            e.preventDefault();\n                            return;\n                        } else {\n                            that.element.focus();\n                            e.preventDefault();\n                            return;\n                        }\n                    }\n                } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                    if (shouldNavigate && that._focusedView && !that._focusedView.hasClass('k-state-selected')) {\n                        var focusedViewName = that._focusedView.data().name;\n                        if (!that.trigger('navigate', {\n                                view: focusedViewName,\n                                action: 'changeView',\n                                date: that.date()\n                            })) {\n                            that.view(focusedViewName);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                    if (that.toolbar.find('.' + FOCUSEDSTATE + ':visible').length) {\n                        that.toolbar.find('.' + FOCUSEDSTATE + ':visible').click();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (e.altKey && key === keys.DOWN && !isViewsDropDown) {\n                    if (that.toolbar.find('.' + FOCUSEDSTATE + ':visible').length) {\n                        that.toolbar.find('.' + FOCUSEDSTATE + ':visible').click();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (key === keys.RIGHT && shouldNavigate) {\n                    $(that.toolbar.find('.' + FOCUSEDSTATE)).removeClass(FOCUSEDSTATE);\n                    if (isRtl) {\n                        that._focusedView = focusedViewIndex - 1 === 0 ? $(viewsWrapper.children(':last')) : $(viewsWrapper.children()[focusedViewIndex + 1 * direction]);\n                    } else {\n                        that._focusedView = focusedViewIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children(':first')) : $(viewsWrapper.children()[focusedViewIndex + 1 * direction]);\n                    }\n                    that._focusedView.focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.LEFT && shouldNavigate) {\n                    $(that.toolbar.find('.' + FOCUSEDSTATE)).removeClass(FOCUSEDSTATE);\n                    if (isRtl) {\n                        that._focusedView = focusedViewIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children(':first')) : $(viewsWrapper.children()[focusedViewIndex - 1 * direction]);\n                    } else {\n                        that._focusedView = focusedViewIndex - 1 < 0 ? $(viewsWrapper.children(':last')) : $(viewsWrapper.children()[focusedViewIndex - 1 * direction]);\n                    }\n                    that._focusedView.focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (e.altKey && key === keys.DOWN && that.toolbar.find('.k-nav-current').hasClass(FOCUSEDSTATE)) {\n                    that._showCalendar();\n                    e.preventDefault();\n                    return;\n                } else if (e.altKey && key === keys.DOWN && isViewsDropDown) {\n                    return;\n                } else if (key === keys.ESC && that.popup && that.popup.visible()) {\n                    that.popup.close();\n                    e.preventDefault();\n                    return;\n                }\n                if (isModifier) {\n                    return;\n                }\n                if (!selection) {\n                    that._selectFirstSlot();\n                    that._select();\n                    that.element.focus();\n                    return;\n                }\n                if (key === keys.TAB) {\n                    if (view.moveToEvent(selection, e.shiftKey)) {\n                        that._select();\n                        if (document.activeElement.getAttribute('id') !== that.element.attr('id')) {\n                            that.element.focus();\n                        }\n                        e.preventDefault();\n                    } else {\n                        that._focusToolbar();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                    if (selection.events.length && editable) {\n                        if (editable.update !== false) {\n                            that.editEvent(selection.events[0]);\n                        }\n                    } else if (editable && editable.create !== false) {\n                        if (selection.isAllDay) {\n                            selection = $.extend({}, selection, { end: kendo.date.addDays(selection.end, -1) });\n                        }\n                        e.preventDefault();\n                        that.addEvent(extend({}, selection, view._resourceBySlot(selection)));\n                    }\n                } else if (key === keys.DELETE && editable !== false && editable.destroy !== false) {\n                    that.removeEvent(selection.events[0]);\n                } else if (key >= 49 && key <= 57) {\n                    var viewByIndex = that._viewByIndex(key - 49);\n                    if (viewByIndex && !that.trigger('navigate', {\n                            view: viewByIndex,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(viewByIndex);\n                    }\n                } else if (view.move(selection, key, e.shiftKey)) {\n                    if (view.inRange(selection)) {\n                        that._select();\n                        $(document.activeElement).blur();\n                        that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        that.wrapper.focus();\n                    } else {\n                        var action = that.date().getTime() > selection.start.getTime() ? 'previous' : 'next';\n                        if (!that.trigger('navigate', {\n                                view: that._selectedViewName,\n                                action: action,\n                                date: selection.start\n                            })) {\n                            that.date(selection.start);\n                        } else {\n                            selection.start = prevSelection.start;\n                            selection.end = prevSelection.end;\n                        }\n                    }\n                    e.preventDefault();\n                }\n                that._adjustSelectedDate();\n            },\n            _focusToolbar: function () {\n                this.toolbar.find('.k-button:first').focus().addClass(FOCUSEDSTATE);\n            },\n            _createSelection: function (item) {\n                var selection = this._selection;\n                var uid;\n                var slot;\n                item = $(item);\n                if (item.is('.k-event')) {\n                    uid = item.attr(kendo.attr('uid'));\n                    if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                        return;\n                    }\n                }\n                if (!selection || !this._ctrlKey && !this._shiftKey) {\n                    selection = this._selection = {\n                        events: [],\n                        groupIndex: 0\n                    };\n                }\n                slot = this.view().selectionByElement(item);\n                if (slot) {\n                    selection.groupIndex = slot.groupIndex || 0;\n                }\n                if (uid) {\n                    slot = getOccurrenceByUid(this._data, uid);\n                }\n                if (slot && slot.uid) {\n                    uid = [slot.uid];\n                }\n                this._updateSelection(slot, uid);\n                this._adjustSelectedDate();\n            },\n            _updateSelection: function (dataItem, events, groupIndex) {\n                var selection = this._selection;\n                if (dataItem && selection) {\n                    var view = this.view();\n                    if (dataItem.uid) {\n                        dataItem = view._updateEventForSelection(dataItem);\n                    }\n                    if (this._shiftKey && selection.start && selection.end) {\n                        var backward = dataItem.end < selection.end;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                        if (backward && view._timeSlotInterval) {\n                            kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                        }\n                    } else {\n                        selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                    }\n                    if ('isDaySlot' in dataItem) {\n                        selection.isAllDay = dataItem.isDaySlot;\n                    } else {\n                        selection.isAllDay = dataItem.isAllDay;\n                    }\n                    if (groupIndex !== null && groupIndex !== undefined) {\n                        selection.groupIndex = groupIndex;\n                    }\n                    selection.index = dataItem.index;\n                    if (this._ctrlKey) {\n                        var indexOfEvent = events && events.length ? selection.events.indexOf(events[0]) : -1;\n                        if (indexOfEvent > -1) {\n                            selection.events.splice(indexOfEvent, 1);\n                        } else {\n                            selection.events = selection.events.concat(events || []);\n                        }\n                    } else {\n                        selection.events = events || [];\n                    }\n                }\n            },\n            options: {\n                name: 'Scheduler',\n                date: TODAY,\n                editable: true,\n                autoBind: true,\n                snap: true,\n                mobile: false,\n                timezone: '',\n                allDaySlot: true,\n                min: new Date(1900, 0, 1),\n                max: new Date(2099, 11, 31),\n                toolbar: null,\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                workDays: null,\n                showWorkHours: false,\n                startTime: TODAY,\n                endTime: TODAY,\n                currentTimeMarker: {\n                    updateInterval: 10000,\n                    useLocalTimezone: true\n                },\n                footer: {},\n                messages: {\n                    today: 'Today',\n                    pdf: 'Export to PDF',\n                    save: 'Save',\n                    cancel: 'Cancel',\n                    destroy: 'Delete',\n                    resetSeries: 'Reset Series',\n                    deleteWindowTitle: 'Delete event',\n                    next: 'Next',\n                    previous: 'Previous',\n                    ariaSlotLabel: 'Selected from {0:t} to {1:t}',\n                    ariaEventLabel: '{0} on {1:D} at {2:t}',\n                    views: {\n                        day: 'Day',\n                        week: 'Week',\n                        workWeek: 'Work Week',\n                        agenda: 'Agenda',\n                        month: 'Month',\n                        timeline: 'Timeline',\n                        timelineWeek: 'Timeline Week',\n                        timelineWorkWeek: 'Timeline Work Week',\n                        timelineMonth: 'Timeline Month'\n                    },\n                    recurrenceMessages: {\n                        deleteWindowTitle: 'Delete Recurring Item',\n                        resetSeriesWindowTitle: 'Reset Series',\n                        deleteWindowOccurrence: 'Delete current occurrence',\n                        deleteWindowSeries: 'Delete the series',\n                        editWindowTitle: 'Edit Recurring Item',\n                        editWindowOccurrence: 'Edit current occurrence',\n                        editWindowSeries: 'Edit the series'\n                    },\n                    editable: { confirmation: DELETECONFIRM },\n                    editor: {\n                        title: 'Title',\n                        start: 'Start',\n                        end: 'End',\n                        allDayEvent: 'All day event',\n                        description: 'Description',\n                        repeat: 'Repeat',\n                        timezone: 'Timezone',\n                        startTimezone: 'Start timezone',\n                        endTimezone: 'End timezone',\n                        separateTimezones: 'Use separate start and end time zones',\n                        timezoneEditorTitle: 'Timezones',\n                        timezoneEditorButton: 'Time zone',\n                        timezoneTitle: 'Time zones',\n                        noTimezone: 'No timezone',\n                        editorTitle: 'Event'\n                    }\n                },\n                height: null,\n                width: null,\n                resources: [],\n                group: {\n                    resources: [],\n                    orientation: 'horizontal'\n                },\n                views: [],\n                selectable: false\n            },\n            events: [\n                REMOVE,\n                EDIT,\n                CANCEL,\n                SAVE,\n                'add',\n                'dataBinding',\n                'dataBound',\n                'moveStart',\n                'move',\n                'moveEnd',\n                'resizeStart',\n                'resize',\n                'resizeEnd',\n                'navigate',\n                'change'\n            ],\n            destroy: function () {\n                var that = this, element;\n                Widget.fn.destroy.call(that);\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                    that.dataSource.unbind(PROGRESS, that._progressHandler);\n                    that.dataSource.unbind(ERROR, that._errorHandler);\n                }\n                if (that._resourceRefreshHandler) {\n                    for (var idx = 0; idx < that.resources.length; idx++) {\n                        var resourceDS = that.resources[idx].dataSource;\n                        resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                        resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                        resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                    }\n                }\n                if (that.calendar) {\n                    that.calendar.destroy();\n                    that.popup.destroy();\n                }\n                if (that.view()) {\n                    that.view().destroy();\n                }\n                if (that._editor) {\n                    that._editor.destroy();\n                }\n                if (this._moveDraggable) {\n                    this._moveDraggable.destroy();\n                }\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n                element = that.element.add(that.wrapper).add(that.toolbar).add(that.popup);\n                element.off(NS);\n                clearTimeout(that._moveTimer);\n                that._model = null;\n                that.toolbar = null;\n                that.element = null;\n                $(window).off('resize' + NS, that._resizeHandler);\n                kendo.destroy(that.wrapper);\n            },\n            setDataSource: function (dataSource) {\n                this.options.dataSource = dataSource;\n                this._dataSource();\n                if (this.options.autoBind && dataSource.fetch) {\n                    dataSource.fetch();\n                } else if (isArray(dataSource)) {\n                    this.view(this._selectedView);\n                }\n            },\n            items: function () {\n                var content = this.wrapper.find('.k-scheduler-content');\n                var view = this.view();\n                if (view && view.options.name === 'agenda') {\n                    return content.find('.k-task');\n                } else {\n                    return content.find('.k-event').add(this.wrapper.find('.k-scheduler-header-wrap').find('.k-scheduler-header-all-day').siblings());\n                }\n            },\n            _movable: function () {\n                var startSlot;\n                var endSlot;\n                var startResources;\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var that = this;\n                var originSlot;\n                var originStartTime;\n                var originalEvent;\n                var distance = 0;\n                var clonedEvents = [];\n                var cachedEvents = [];\n                var isMobile = that._isMobile();\n                var movable = that.options.editable && that.options.editable.move !== false;\n                var resizable = that.options.editable && that.options.editable.resize !== false;\n                if (movable || resizable && isMobile) {\n                    that._dragging = false;\n                    if (isMobile && kendo.support.mobileOS.android) {\n                        distance = 5;\n                    }\n                    that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                        distance: distance,\n                        filter: '.k-event',\n                        ignore: '.k-resize-handle',\n                        holdToDrag: isMobile,\n                        autoScroll: true\n                    });\n                    if (movable) {\n                        that._moveDraggable.bind('dragstart', function (e) {\n                            var view = that.view();\n                            var eventElement = e.currentTarget;\n                            var isTouch = that._isTouch(e);\n                            that._dragging = true;\n                            if (!view.options.editable || view.options.editable.move === false) {\n                                that._dragging = false;\n                                e.preventDefault();\n                                return;\n                            }\n                            if (isTouch && !eventElement.hasClass('k-event-active')) {\n                                that._dragging = false;\n                                that.element.find('.k-event-active').removeClass('k-event-active');\n                                e.preventDefault();\n                                return;\n                            }\n                            event = that.occurrenceByUid(eventElement.attr(kendo.attr('uid')));\n                            clonedEvent = event.clone();\n                            originalEvent = event.clone();\n                            clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n                            clonedEvent.inverseColor = that._isInverseColor(eventElement);\n                            clonedEvents = [];\n                            if (that._selection) {\n                                var events = that._selection.events;\n                                for (var i = 0; i < events.length; i++) {\n                                    var evtClone = that.occurrenceByUid(events[i]).clone();\n                                    var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n                                    evtClone.update(view._eventOptionsForMove(evtClone));\n                                    if (evtCloneElement.length) {\n                                        evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                    }\n                                    clonedEvents.push(evtClone);\n                                }\n                            } else {\n                                clonedEvents.push(clonedEvent);\n                            }\n                            startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                            startResources = view._resourceBySlot(startSlot);\n                            originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n                            endSlot = startSlot;\n                            originSlot = startSlot;\n                            if (!startSlot || that.trigger('moveStart', { event: event })) {\n                                e.preventDefault();\n                            }\n                        }).bind('drag', function (e) {\n                            var view = that.view();\n                            var slot = view._slotByPosition(e.x.location, e.y.location);\n                            var distance;\n                            var range;\n                            var i;\n                            if (!slot) {\n                                return;\n                            }\n                            endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            if (slot.isDaySlot !== startSlot.isDaySlot) {\n                                if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                    var slotIndex = $(startSlot.element).index();\n                                    var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n                                    startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n                                    startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n                                    cachedEvents = clonedEvents.map(function (event) {\n                                        return event.clone();\n                                    });\n                                    for (i = 0; i < clonedEvents.length; i++) {\n                                        if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                            clonedEvents[i].isAllDay = slot.isDaySlot;\n                                            clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                            clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n                                            if (!slot.isDaySlot) {\n                                                kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                                kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                            }\n                                        }\n                                    }\n                                } else {\n                                    startSlot = $.extend(true, {}, originSlot);\n                                    startTime = originStartTime;\n                                    clonedEvents = cachedEvents;\n                                }\n                            }\n                            distance = endTime - startTime;\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                            range = moveEventRange(clonedEvent, distance);\n                            if (!that.trigger('move', {\n                                    event: event,\n                                    slot: {\n                                        element: slot.element,\n                                        start: slot.startDate(),\n                                        end: slot.endDate(),\n                                        isDaySlot: slot.isDaySlot\n                                    },\n                                    resources: view._resourceBySlot(slot),\n                                    start: range.start,\n                                    end: range.end\n                                })) {\n                                endSlot = slot;\n                            } else {\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                                }\n                            }\n                        }).bind('dragend', function (e) {\n                            that.view()._removeMoveHint();\n                            var distance = endTime - startTime;\n                            var range = moveEventRange(clonedEvent, distance);\n                            var start = range.start;\n                            var end = range.end;\n                            that._dragging = false;\n                            var endResources = that.view()._resourceBySlot(endSlot);\n                            var prevented = that.trigger('moveEnd', {\n                                event: event,\n                                slot: {\n                                    element: endSlot.element,\n                                    start: endSlot.startDate(),\n                                    end: endSlot.endDate()\n                                },\n                                start: start,\n                                end: end,\n                                resources: endResources\n                            });\n                            if (!prevented && (event.start.getTime() !== start.getTime() || event.end.getTime() !== end.getTime() || originSlot.isDaySlot !== endSlot.isDaySlot || kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n                                that._isMultiDrag = clonedEvents.length > 1;\n                                for (var i = 0; i < clonedEvents.length; i++) {\n                                    var evt = clonedEvents[i];\n                                    range = moveEventRange(evt, distance);\n                                    var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                    var eventOptions = $.extend({\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    }, updatedEventOptions, endResources);\n                                    that._updateEvent(null, evt, eventOptions);\n                                }\n                                if (that._isMultiDrag) {\n                                    that.dataSource.sync();\n                                    that._isMultiDrag = false;\n                                }\n                            }\n                            e.currentTarget.removeClass('k-event-active');\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        }).bind('dragcancel', function () {\n                            that.view()._removeMoveHint();\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        });\n                    }\n                    that._moveDraggable.bind('hold', function (e) {\n                        if (that._isTouch(e)) {\n                            that.element.find('.k-event-active').removeClass('k-event-active');\n                            if (that.options.selectable) {\n                                that._createSelection(e.currentTarget);\n                            }\n                            e.currentTarget.addClass('k-event-active');\n                        }\n                    });\n                }\n            },\n            _resizable: function () {\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var slot;\n                var that = this;\n                var distance = 0;\n                function direction(handle) {\n                    var directions = {\n                        'k-resize-e': 'east',\n                        'k-resize-w': 'west',\n                        'k-resize-n': 'north',\n                        'k-resize-s': 'south'\n                    };\n                    for (var key in directions) {\n                        if (handle.hasClass(key)) {\n                            return directions[key];\n                        }\n                    }\n                }\n                if (that._isMobile() && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n                that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: '.k-resize-handle',\n                    autoScroll: true,\n                    dragstart: function (e) {\n                        var dragHandle = $(e.currentTarget);\n                        var eventElement = dragHandle.closest('.k-event');\n                        var uid = eventElement.attr(kendo.attr('uid'));\n                        var view = that.view();\n                        that._dragging = true;\n                        event = that.occurrenceByUid(uid);\n                        clonedEvent = event.clone();\n                        view._updateEventForResize(clonedEvent);\n                        slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        if (that.trigger('resizeStart', { event: event })) {\n                            e.preventDefault();\n                        }\n                        startTime = kendo.date.toUtcTime(clonedEvent.start);\n                        endTime = kendo.date.toUtcTime(clonedEvent.end);\n                    },\n                    drag: function (e) {\n                        if (!slot) {\n                            return;\n                        }\n                        var dragHandle = $(e.currentTarget);\n                        var dir = direction(dragHandle);\n                        var view = that.view();\n                        var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n                        if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                            return;\n                        }\n                        slot = currentSlot;\n                        var originalStart = startTime;\n                        var originalEnd = endTime;\n                        if (dir == 'south') {\n                            if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            }\n                        } else if (dir == 'north') {\n                            if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == 'east') {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == 'west') {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                        if (!that.trigger('resize', {\n                                event: event,\n                                slot: {\n                                    element: slot.element,\n                                    start: slot.startDate(),\n                                    end: slot.endDate()\n                                },\n                                start: kendo.timezone.toLocalDate(startTime),\n                                end: kendo.timezone.toLocalDate(endTime),\n                                resources: view._resourceBySlot(slot)\n                            })) {\n                            view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                        } else {\n                            startTime = originalStart;\n                            endTime = originalEnd;\n                        }\n                    },\n                    dragend: function (e) {\n                        var dragHandle = $(e.currentTarget);\n                        var start = new Date(clonedEvent.start.getTime());\n                        var end = new Date(clonedEvent.end.getTime());\n                        var dir = direction(dragHandle);\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n                        if (dir == 'south') {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        } else if (dir == 'north') {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        } else if (dir == 'east') {\n                            if (slot.isDaySlot) {\n                                end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                            } else {\n                                end = kendo.timezone.toLocalDate(endTime);\n                            }\n                        } else if (dir == 'west') {\n                            if (slot.isDaySlot) {\n                                start = new Date(kendo.timezone.toLocalDate(startTime));\n                                start.setHours(0);\n                                start.setMinutes(0);\n                            } else {\n                                start = kendo.timezone.toLocalDate(startTime);\n                            }\n                        }\n                        var prevented = that.trigger('resizeEnd', {\n                            event: event,\n                            slot: {\n                                element: slot.element,\n                                start: slot.startDate(),\n                                end: slot.endDate()\n                            },\n                            start: start,\n                            end: end,\n                            resources: that.view()._resourceBySlot(slot)\n                        });\n                        if (!prevented && end.getTime() >= start.getTime()) {\n                            if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                                that.view()._updateEventForResize(event);\n                                that._updateEvent(dir, event, {\n                                    start: start,\n                                    end: end\n                                });\n                            }\n                        }\n                        slot = null;\n                        event = null;\n                    },\n                    dragcancel: function () {\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n                        slot = null;\n                        event = null;\n                    }\n                });\n            },\n            _updateEvent: function (dir, event, eventInfo) {\n                var that = this;\n                var updateEvent = function (event, callback) {\n                    try {\n                        that._preventRefresh = true;\n                        event.update(eventInfo);\n                        that._convertDates(event);\n                    } finally {\n                        that._preventRefresh = false;\n                    }\n                    if (!that.trigger(SAVE, { event: event })) {\n                        if (callback) {\n                            callback();\n                        }\n                        if (!that._isMultiDrag) {\n                            that.dataSource.sync();\n                        }\n                    }\n                };\n                var recurrenceHead = function (event) {\n                    if (event.recurrenceRule) {\n                        return that.dataSource.getByUid(event.uid);\n                    } else {\n                        return that.dataSource.get(event.recurrenceId);\n                    }\n                };\n                var updateSeries = function () {\n                    var head = recurrenceHead(event);\n                    if (dir == 'south' || dir == 'north') {\n                        if (eventInfo.start) {\n                            var start = kendo.date.getDate(head.start);\n                            kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                            eventInfo.start = start;\n                        }\n                        if (eventInfo.end) {\n                            var end = kendo.date.getDate(head.end);\n                            kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                            eventInfo.end = end;\n                        }\n                    }\n                    that.dataSource._removeExceptions(head);\n                    updateEvent(head);\n                };\n                var updateOccurrence = function () {\n                    var head = recurrenceHead(event);\n                    var eventUid;\n                    var callback = function () {\n                        that._convertDates(head);\n                        if (that._selection) {\n                            that._selection.events.push(eventUid);\n                        }\n                    };\n                    var exception = head.toOccurrence({\n                        start: event.start,\n                        end: event.end\n                    });\n                    eventUid = exception.uid;\n                    updateEvent(that.dataSource.add(exception), callback);\n                };\n                if (event.recurrenceRule || event.isOccurrence()) {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(event, updateOccurrence, updateSeries, {\n                        title: recurrenceMessages.editWindowTitle,\n                        text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                        occurrenceText: recurrenceMessages.editWindowOccurrence,\n                        seriesText: recurrenceMessages.editWindowSeries\n                    });\n                } else {\n                    updateEvent(that.dataSource.getByUid(event.uid));\n                }\n            },\n            _modelForContainer: function (container) {\n                container = $(container).closest('[' + kendo.attr('uid') + ']');\n                return this.dataSource.getByUid(container.attr(kendo.attr('uid')));\n            },\n            showDialog: function (options) {\n                this._editor.showDialog(options);\n            },\n            focus: function () {\n                this.wrapper.focus();\n            },\n            _confirmation: function (callback, model, isResetSeries) {\n                var editable = this.options.editable;\n                if (editable === true || editable.confirmation !== false) {\n                    var messages = this.options.messages;\n                    var title = messages.deleteWindowTitle;\n                    var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n                    if (this._isEditorOpened() && model.isRecurring()) {\n                        var recurrenceMessages = this.options.messages.recurrenceMessages;\n                        title = recurrenceMessages.deleteWindowTitle;\n                        if (model.isException() || model.isNew()) {\n                            text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                        } else {\n                            text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                        }\n                        if (isResetSeries) {\n                            title = recurrenceMessages.resetSeriesWindowTitle;\n                            text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                        }\n                    }\n                    var buttons = [{\n                            name: 'destroy',\n                            text: isResetSeries ? messages.resetSeries : messages.destroy,\n                            click: function () {\n                                callback();\n                            }\n                        }];\n                    if (!(this._isMobile() && kendo.Pane)) {\n                        buttons.push({\n                            name: 'canceledit',\n                            text: messages.cancel,\n                            click: function () {\n                                callback(true);\n                            }\n                        });\n                    }\n                    this._unbindResize();\n                    this.showDialog({\n                        model: model,\n                        text: text,\n                        title: title,\n                        buttons: buttons\n                    });\n                    this._bindResize();\n                } else {\n                    callback();\n                }\n            },\n            addEvent: function (eventInfo) {\n                var editable = this._editor.editable;\n                var dataSource = this.dataSource;\n                var event;\n                eventInfo = eventInfo || {};\n                var prevented = this.trigger('add', { event: eventInfo });\n                if (!prevented && (editable && editable.end() || !editable)) {\n                    this.cancelEvent();\n                    if (eventInfo && eventInfo.toJSON) {\n                        eventInfo = eventInfo.toJSON();\n                    }\n                    event = dataSource.add(eventInfo);\n                    if (event) {\n                        this.cancelEvent();\n                        this._editEvent(event);\n                    }\n                }\n            },\n            saveEvent: function () {\n                var that = this;\n                var editor = that._editor;\n                var dataSource = that.dataSource;\n                if (!editor) {\n                    return;\n                }\n                var editable = editor.editable;\n                var container = editor.container;\n                var model = that._modelForContainer(container);\n                var events, i, event;\n                if (container && editable && editable.end() && !that.trigger(SAVE, {\n                        container: container,\n                        event: model\n                    })) {\n                    if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                        events = dataSource.data();\n                        for (i = events.length - 1; i >= 0; i -= 1) {\n                            event = events[i];\n                            if (event && event.recurrenceId === model.id) {\n                                dataSource.remove(event);\n                            }\n                        }\n                        model.set('recurrenceException', '');\n                    }\n                    if (!model.dirty && !model.isOccurrence()) {\n                        that._convertDates(model, 'remove');\n                    }\n                    dataSource.sync();\n                }\n            },\n            cancelEvent: function () {\n                var editor = this._editor;\n                var container = editor.container;\n                var model;\n                if (container) {\n                    model = this._modelForContainer(container);\n                    if (model && model.isOccurrence()) {\n                        this._convertDates(model, 'remove');\n                        this._convertDates(this.dataSource.get(model.recurrenceId), 'remove');\n                    }\n                    this.dataSource.cancelChanges(model);\n                    editor.close();\n                }\n            },\n            editEvent: function (uid) {\n                var model = typeof uid == 'string' ? this.occurrenceByUid(uid) : uid;\n                if (!model) {\n                    return;\n                }\n                this.cancelEvent();\n                if (model.isRecurring()) {\n                    this._editRecurringDialog(model);\n                } else {\n                    this._editEvent(model);\n                }\n            },\n            _editEvent: function (model) {\n                this._preventRefresh = true;\n                this._unbindResize();\n                this._createPopupEditor(model);\n                this._bindResize();\n            },\n            _editRecurringDialog: function (model) {\n                var that = this;\n                var editOccurrence = function () {\n                    if (model.isException()) {\n                        that._editEvent(model);\n                    } else {\n                        that.addEvent(model);\n                    }\n                };\n                var editSeries = function () {\n                    if (model.recurrenceId) {\n                        model = that.dataSource.get(model.recurrenceId);\n                    }\n                    that._editEvent(model);\n                };\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, editOccurrence, editSeries, {\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            },\n            _showRecurringDialog: function (model, editOccurrence, editSeries, messages) {\n                var editable = this.options.editable;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : 'dialog';\n                if (editRecurringMode === 'occurrence' || this._isMultiDrag) {\n                    editOccurrence();\n                } else if (editRecurringMode === 'series') {\n                    editSeries();\n                } else {\n                    this._unbindResize();\n                    this.showDialog({\n                        model: model,\n                        title: messages.title,\n                        text: messages.text,\n                        buttons: [\n                            {\n                                text: messages.occurrenceText,\n                                click: editOccurrence\n                            },\n                            {\n                                text: messages.seriesText,\n                                click: editSeries\n                            }\n                        ]\n                    });\n                    this._bindResize();\n                }\n            },\n            _createButton: function (command) {\n                var template = command.template || COMMANDBUTTONTMPL, commandName = typeof command === STRING ? command : command.name || command.text, options = {\n                        className: 'k-scheduler-' + (commandName || '').replace(/\\s/g, ''),\n                        text: commandName,\n                        attr: ''\n                    };\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    if (command.className) {\n                        command.className += ' ' + options.className;\n                    }\n                    if (commandName === 'edit' && isPlainObject(command.text)) {\n                        command = extend(true, {}, command);\n                        command.text = command.text.edit;\n                    }\n                    options = extend(true, options, defaultCommands[commandName], command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName]);\n                }\n                return kendo.template(template)(options);\n            },\n            _convertDates: function (model, method) {\n                var timezone = this.dataSource.reader.timezone;\n                var startTimezone = model.startTimezone;\n                var endTimezone = model.endTimezone;\n                var start = model.start;\n                var end = model.start;\n                method = method || 'apply';\n                startTimezone = startTimezone || endTimezone;\n                endTimezone = endTimezone || startTimezone;\n                if (startTimezone) {\n                    if (timezone) {\n                        if (method === 'apply') {\n                            start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                            end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                        } else {\n                            start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                            end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                        }\n                    } else {\n                        start = kendo.timezone[method](model.start, startTimezone);\n                        end = kendo.timezone[method](model.end, endTimezone);\n                    }\n                    model._set('start', start);\n                    model._set('end', end);\n                }\n            },\n            _createEditor: function () {\n                var that = this;\n                var editor;\n                if (this._isMobile() && kendo.Pane) {\n                    editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources,\n                        createButton: proxy(this._createButton, this)\n                    }));\n                } else {\n                    editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        createButton: proxy(this._createButton, this),\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources\n                    }));\n                }\n                editor.bind('cancel', function (e) {\n                    if (that.trigger('cancel', {\n                            container: e.container,\n                            event: e.model\n                        })) {\n                        e.preventDefault();\n                        return;\n                    }\n                    that._preventRefresh = false;\n                    that.cancelEvent();\n                    if (that._attemptRefresh) {\n                        that.refresh();\n                    }\n                    that.focus();\n                });\n                editor.bind('edit', function (e) {\n                    if (that.trigger(EDIT, {\n                            container: e.container,\n                            event: e.model\n                        })) {\n                        e.preventDefault();\n                    }\n                });\n                editor.bind('save', function () {\n                    that._preventRefresh = false;\n                    that.saveEvent();\n                });\n                editor.bind('remove', function (e) {\n                    that._preventRefresh = false;\n                    that.removeEvent(e.model);\n                });\n                editor.bind('resetSeries', function (e) {\n                    that._confirmation(function (cancel) {\n                        that._preventRefresh = false;\n                        if (!cancel) {\n                            that.dataSource._removeExceptions(e.model);\n                            that.saveEvent();\n                        }\n                    }, e.model, true);\n                });\n            },\n            _createPopupEditor: function (model) {\n                var editor = this._editor;\n                if (!model.isNew() || model.isOccurrence()) {\n                    if (model.isOccurrence()) {\n                        this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                    }\n                    this._convertDates(model);\n                }\n                this.editable = editor.editEvent(model);\n            },\n            removeEvent: function (uid) {\n                var that = this, model = typeof uid == 'string' ? that.occurrenceByUid(uid) : uid;\n                if (!model) {\n                    return;\n                }\n                if (model.isRecurring()) {\n                    that._deleteRecurringDialog(model);\n                } else {\n                    that._confirmation(function (cancel) {\n                        if (!cancel) {\n                            that._removeEvent(model);\n                        }\n                    }, model);\n                }\n            },\n            occurrenceByUid: function (uid) {\n                var occurrence = this.dataSource.getByUid(uid);\n                if (!occurrence) {\n                    occurrence = getOccurrenceByUid(this._data, uid);\n                }\n                return occurrence;\n            },\n            occurrencesInRange: function (start, end) {\n                return new kendo.data.Query(this._data).filter({\n                    logic: 'or',\n                    filters: [\n                        {\n                            logic: 'and',\n                            filters: [\n                                {\n                                    field: 'start',\n                                    operator: 'gte',\n                                    value: start\n                                },\n                                {\n                                    field: 'end',\n                                    operator: 'gte',\n                                    value: start\n                                },\n                                {\n                                    field: 'start',\n                                    operator: 'lt',\n                                    value: end\n                                }\n                            ]\n                        },\n                        {\n                            logic: 'and',\n                            filters: [\n                                {\n                                    field: 'start',\n                                    operator: 'lte',\n                                    value: start\n                                },\n                                {\n                                    field: 'end',\n                                    operator: 'gt',\n                                    value: start\n                                }\n                            ]\n                        }\n                    ]\n                }).toArray();\n            },\n            _removeEvent: function (model) {\n                if (!this.trigger(REMOVE, { event: model })) {\n                    if (this.dataSource.remove(model)) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n            _deleteRecurringDialog: function (model) {\n                var that = this;\n                var currentModel = model;\n                var editable = that.options.editable;\n                var deleteOccurrence;\n                var deleteSeries;\n                var createException;\n                var deleteOccurrenceConfirmation;\n                var deleteSeriesConfirmation;\n                var createExceptionConfirmation;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : 'dialog';\n                deleteOccurrence = function () {\n                    var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                    var head = that.dataSource.get(occurrence.recurrenceId);\n                    that._convertDates(head);\n                    that._removeEvent(occurrence);\n                };\n                deleteSeries = function () {\n                    if (currentModel.recurrenceId) {\n                        currentModel = that.dataSource.get(currentModel.recurrenceId);\n                    }\n                    that._removeEvent(currentModel);\n                };\n                createException = function () {\n                    that.dataSource.remove(currentModel);\n                    that.dataSource.sync();\n                };\n                if (editRecurringMode != 'dialog' || that._isEditorOpened()) {\n                    deleteOccurrenceConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                deleteOccurrence();\n                            }\n                        }, currentModel);\n                    };\n                    deleteSeriesConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                deleteSeries();\n                            }\n                        }, currentModel);\n                    };\n                    createExceptionConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                createException();\n                            }\n                        }, currentModel);\n                    };\n                }\n                var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n                var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n                var exeptionCallback = createExceptionConfirmation || createException;\n                if (that._isEditorOpened()) {\n                    if (model.isException()) {\n                        occurrenceCallback();\n                    } else if (model.isNew()) {\n                        exeptionCallback();\n                    } else {\n                        seriesCallback();\n                    }\n                } else {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                        title: recurrenceMessages.deleteWindowTitle,\n                        text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                        occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                        seriesText: recurrenceMessages.deleteWindowSeries\n                    });\n                }\n            },\n            _isEditorOpened: function () {\n                return !!this._editor.container;\n            },\n            _unbindView: function (view) {\n                var that = this;\n                that.angular('cleanup', function () {\n                    return { elements: that.items() };\n                });\n                view.destroy();\n            },\n            _bindView: function (view) {\n                var that = this;\n                if (that.options.editable) {\n                    if (that._viewRemoveHandler) {\n                        view.unbind(REMOVE, that._viewRemoveHandler);\n                    }\n                    that._viewRemoveHandler = function (e) {\n                        that.removeEvent(e.uid);\n                    };\n                    view.bind(REMOVE, that._viewRemoveHandler);\n                    if (that._viewAddHandler) {\n                        view.unbind(ADD, that._viewAddHandler);\n                    }\n                    that._viewAddHandler = function (e) {\n                        that.addEvent(e.eventInfo);\n                    };\n                    view.bind(ADD, this._viewAddHandler);\n                    if (that._viewEditHandler) {\n                        view.unbind(EDIT, that._viewEditHandler);\n                    }\n                    that._viewEditHandler = function (e) {\n                        that.editEvent(e.uid);\n                    };\n                    view.bind(EDIT, this._viewEditHandler);\n                }\n                if (that._viewNavigateHandler) {\n                    view.unbind('navigate', that._viewNavigateHandler);\n                }\n                that._viewNavigateHandler = function (e) {\n                    if (e.action) {\n                        if (!that.trigger('navigate', {\n                                view: e.view,\n                                isWorkDay: e.isWorkDay,\n                                action: e.action,\n                                date: e.date\n                            })) {\n                            that.date(e.date);\n                        }\n                    } else if (e.view) {\n                        var switchWorkDay = 'isWorkDay' in e;\n                        var action = switchWorkDay ? 'changeWorkDay' : 'changeView';\n                        if (!that.trigger('navigate', {\n                                view: e.view,\n                                isWorkDay: e.isWorkDay,\n                                action: action,\n                                date: e.date\n                            })) {\n                            if (switchWorkDay) {\n                                that._workDayMode = e.isWorkDay;\n                            }\n                            that._selectView(e.view);\n                            that.date(e.date);\n                        }\n                    }\n                };\n                view.bind('navigate', that._viewNavigateHandler);\n                if (that._viewActivateHandler) {\n                    view.unbind('activate', that._viewActivateHandler);\n                }\n                that._viewActivateHandler = function () {\n                    var view = this;\n                    if (that._selection) {\n                        view.constrainSelection(that._selection);\n                        that._select();\n                        that._adjustSelectedDate();\n                    }\n                };\n                view.bind('activate', that._viewActivateHandler);\n            },\n            _selectView: function (name) {\n                var that = this;\n                if (name && that.views[name]) {\n                    if (that._selectedView) {\n                        that._unbindView(that._selectedView);\n                    }\n                    that._selectedView = that._renderView(name);\n                    that._selectedViewName = name;\n                    if (that._viewsCount > 1 && !that._isMobile()) {\n                        var viewsDropdown = that.toolbar.find('.k-views-dropdown');\n                        var viewButtons = that.toolbar.find('.k-scheduler-views > .k-button');\n                        if (that.toolbar.find('.k-views-dropdown').length === 0) {\n                            that.toolbar.find('.k-scheduler-views-wrapper').prepend(VIEWS_DROPDOWN_TEMPLATE({\n                                views: that.views,\n                                view: name,\n                                ns: kendo.ns\n                            }));\n                            viewsDropdown = that.toolbar.find('.k-views-dropdown');\n                        }\n                        viewsDropdown.val(name);\n                        viewButtons.removeClass('k-state-selected');\n                        viewButtons.filter('.k-view-' + name.replace(/\\./g, '\\\\.').toLowerCase()).addClass('k-state-selected');\n                    } else {\n                        var viewSelect = that.toolbar.find('.k-scheduler-mobile-views');\n                        viewSelect.find('[value=' + name.replace(/\\./g, '\\\\.') + ']').prop('selected', 'selected');\n                    }\n                }\n            },\n            view: function (name) {\n                var that = this;\n                if (name) {\n                    that._selectView(name);\n                    that.rebind();\n                    return;\n                }\n                return that._selectedView;\n            },\n            viewName: function () {\n                return this.view().name;\n            },\n            _renderView: function (name) {\n                var view = this._initializeView(name);\n                this._bindView(view);\n                if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                    view.content.css('-ms-touch-action', 'pinch-zoom');\n                    view.content.css('touch-action', 'pinch-zoom');\n                }\n                this._model.set('formattedDate', view.dateForTitle());\n                this._model.set('formattedShortDate', view.shortDateForTitle());\n                this._model.set('formattedMobileDate', view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n                this._model.set('formattedYear', kendo.format('{0:yyyy}', view.startDate()));\n                return view;\n            },\n            resize: function (force) {\n                var size = this.getSize();\n                var currentSize = this._size;\n                var view = this.view();\n                if (!view || !view.groups) {\n                    return;\n                }\n                if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                    this.refresh({ action: 'resize' });\n                    this._size = size;\n                }\n            },\n            _adjustSelectedDate: function () {\n                var date = this._model.selectedDate, selection = this._selection, start = selection.start;\n                if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                    date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n                }\n            },\n            _initializeView: function (name) {\n                var view = this.views[name];\n                if (view) {\n                    var isSettings = isPlainObject(view), overrideOptions = {}, type = view.type;\n                    if (typeof type === STRING) {\n                        type = kendo.getter(view.type)(window);\n                    }\n                    if (isSettings && view.workDays && view.workDays.length) {\n                        overrideOptions.workDays = view.workDays;\n                    }\n                    if (type) {\n                        view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                            resources: this.resources,\n                            date: this.date(),\n                            startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                            endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                            showWorkHours: this._workDayMode\n                        }), overrideOptions));\n                    } else {\n                        throw new Error('There is no such view');\n                    }\n                }\n                return view;\n            },\n            _views: function () {\n                var views = this.options.views;\n                var view;\n                var defaultView;\n                var selected;\n                var isSettings;\n                var name;\n                var type;\n                var idx;\n                var length;\n                this.views = {};\n                this._viewsCount = 0;\n                for (idx = 0, length = views.length; idx < length; idx++) {\n                    var hasType = false;\n                    view = views[idx];\n                    isSettings = isPlainObject(view);\n                    if (isSettings) {\n                        type = name = view.type ? view.type : view;\n                        if (typeof type !== STRING) {\n                            name = view.name || view.title;\n                            hasType = true;\n                        }\n                    } else {\n                        type = name = view;\n                    }\n                    defaultView = defaultViews[name];\n                    if (defaultView && !hasType) {\n                        view.type = defaultView.type;\n                        defaultView.title = this.options.messages.views[name];\n                        if (defaultView.type === 'day') {\n                            defaultView.messages = { allDay: this.options.messages.allDay };\n                        } else if (defaultView.type === 'agenda') {\n                            defaultView.messages = {\n                                event: this.options.messages.event,\n                                date: this.options.messages.date,\n                                time: this.options.messages.time\n                            };\n                        }\n                    }\n                    view = extend({ title: name }, defaultView, isSettings ? view : {});\n                    if (name) {\n                        this.views[name] = view;\n                        this._viewsCount++;\n                        if (!selected || view.selected) {\n                            selected = name;\n                        }\n                    }\n                }\n                if (selected) {\n                    this._selectedViewName = selected;\n                }\n            },\n            rebind: function () {\n                var that = this, resources = that.resources, resourceFetchArray = [];\n                if (that._preventRebind) {\n                    that._preventRebind = false;\n                    return;\n                }\n                if (that.options.autoBind === false && resources && resources.length > 0) {\n                    resources.forEach(function (resource) {\n                        if (resource.dataSource.data().length === 0) {\n                            that._preventRebind = true;\n                            resourceFetchArray.push(resource.dataSource.fetch());\n                        }\n                    });\n                    $.when.apply(null, resourceFetchArray).then(function () {\n                        that.dataSource.fetch();\n                        that._preventRebind = false;\n                    });\n                } else {\n                    that.dataSource.fetch();\n                }\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                    dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n                } else if (dataSource instanceof SchedulerDataSource) {\n                    options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : '';\n                }\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n                } else {\n                    that._refreshHandler = proxy(that.refresh, that);\n                    that._progressHandler = proxy(that._requestStart, that);\n                    that._errorHandler = proxy(that._error, that);\n                }\n                that.dataSource = kendo.data.SchedulerDataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler);\n                that.options.dataSource = that.dataSource;\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _progress: function (toggle) {\n                var element = this.element.find('.k-scheduler-content');\n                kendo.ui.progress(element, toggle);\n            },\n            _resources: function () {\n                var that = this;\n                var resources = that.options.resources;\n                var resourcePromises = [];\n                for (var idx = 0; idx < resources.length; idx++) {\n                    var resource = resources[idx];\n                    var field = resource.field;\n                    var name = resource.name || field;\n                    var dataSource = resource.dataSource;\n                    if (!field || !dataSource) {\n                        throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                    }\n                    that.resources.push({\n                        field: field,\n                        name: name,\n                        title: resource.title || field,\n                        dataTextField: resource.dataTextField || 'text',\n                        dataValueField: resource.dataValueField || 'value',\n                        dataColorField: resource.dataColorField || 'color',\n                        valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                        multiple: resource.multiple || false,\n                        dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                    });\n                }\n                if (!that.options.autoBind) {\n                    that._selectView(that._selectedViewName);\n                } else {\n                    $.when.apply(null, resourcePromises).then(function () {\n                        that.view(that._selectedViewName);\n                    });\n                }\n            },\n            _resourceDataSource: function (resourceDS, groupName, promises) {\n                var that = this;\n                var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n                var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n                if (that.options.autoBind) {\n                    promises.push(dataSourceInstance.fetch(function () {\n                        that._bindResourceEvents(this, groupName);\n                    }));\n                } else {\n                    that._bindResourceEvents(dataSourceInstance, groupName);\n                }\n                return dataSourceInstance;\n            },\n            _bindResourceEvents: function (resourceDS, groupName) {\n                var that = this;\n                var isGrouped = that.options.group && that.options.group.resources.length;\n                var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n                if (!that._resourceRefreshHandler && isResourceGrouped) {\n                    that._resourceRefreshHandler = proxy(that._refreshResource, that);\n                    that._resourceErrorHandler = proxy(that._error, that);\n                }\n                if (isResourceGrouped) {\n                    resourceDS.bind(CHANGE, that._resourceRefreshHandler).bind(ERROR, that._resourceErrorHandler);\n                }\n            },\n            _refreshResource: function () {\n                var that = this;\n                var preventRefresh = that._editor && that._editor.editable || that._preventRefresh;\n                if (!preventRefresh) {\n                    that.view(that._selectedViewName);\n                }\n            },\n            _initModel: function () {\n                var that = this;\n                that._model = kendo.observable({\n                    selectedDate: new Date(this.options.date),\n                    formattedDate: '',\n                    formattedShortDate: ''\n                });\n                that._model.bind('change', function (e) {\n                    if (e.field === 'selectedDate') {\n                        that.view(that._selectedViewName);\n                    }\n                });\n            },\n            _wrapper: function () {\n                var that = this;\n                var options = that.options;\n                var height = options.height;\n                var width = options.width;\n                that.wrapper = that.element.addClass('k-widget k-scheduler k-floatwrap').attr('role', 'grid').attr('aria-multiselectable', true);\n                if (that._isMobile()) {\n                    that.wrapper.addClass('k-scheduler-mobile');\n                }\n                if (height) {\n                    that.wrapper.height(height);\n                }\n                if (width) {\n                    that.wrapper.width(width);\n                }\n            },\n            date: function (value) {\n                if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                    this._model.set('selectedDate', value);\n                }\n                return getDate(this._model.get('selectedDate'));\n            },\n            _toolbar: function () {\n                var that = this;\n                var options = that.options;\n                var commands = [];\n                if (options.toolbar) {\n                    commands = $.isArray(options.toolbar) ? options.toolbar : [options.toolbar];\n                }\n                var template = this._isMobile() ? MOBILETOOLBARTEMPLATE : TOOLBARTEMPLATE;\n                var toolbar = $(template({\n                    messages: options.messages,\n                    pdf: $.grep(commands, function (item) {\n                        return item == 'pdf' || item.name == 'pdf';\n                    }).length > 0,\n                    search: $.grep(commands, function (item) {\n                        return item == 'search' || item.name == 'search';\n                    }).length > 0,\n                    ns: kendo.ns,\n                    view: that._selectedViewName,\n                    views: that.views,\n                    viewsCount: that._viewsCount,\n                    editable: that.options.editable\n                }));\n                that.wrapper.append(toolbar);\n                that.toolbar = toolbar;\n                kendo.bind(that.toolbar, that._model);\n                toolbar.on(CLICK + NS, '.k-pdf', function (e) {\n                    e.preventDefault();\n                    that.saveAsPDF();\n                });\n                toolbar.on('input' + NS, '.k-scheduler-search-input', kendo.throttle(function (e) {\n                    that.dataSource.filter({\n                        logic: 'or',\n                        filters: [\n                            {\n                                field: 'title',\n                                operator: 'contains',\n                                value: e.target.value\n                            },\n                            {\n                                field: 'description',\n                                operator: 'contains',\n                                value: e.target.value\n                            }\n                        ]\n                    });\n                }, 250));\n                toolbar.on(CLICK + NS, '.k-create-event', function (e) {\n                    e.preventDefault();\n                    that.addEvent();\n                });\n                toolbar.on(CLICK + NS, '.k-nav-calendar', function (e) {\n                    e.preventDefault();\n                    that._showCalendar(e.target);\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-navigation > .k-button', function (e) {\n                    var button = $(this);\n                    var date = new Date(that.date());\n                    var action = '';\n                    var currentDate = new Date();\n                    var timezone = that.options.timezone;\n                    if ($(e.target).is('input')) {\n                        return;\n                    }\n                    e.preventDefault();\n                    if (button.hasClass('k-nav-today')) {\n                        action = 'today';\n                        if (timezone) {\n                            var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                            date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                        } else {\n                            date = currentDate;\n                        }\n                    } else if (button.hasClass('k-nav-next')) {\n                        action = 'next';\n                        date = that.view().nextDate();\n                    } else if (button.hasClass('k-nav-prev')) {\n                        action = 'previous';\n                        date = that.view().previousDate();\n                    }\n                    if (!that.trigger('navigate', {\n                            view: that._selectedViewName,\n                            action: action,\n                            date: date\n                        })) {\n                        that.date(date);\n                    }\n                });\n                toolbar.on(CLICK + NS, '.k-nav-current', function (e) {\n                    e.preventDefault();\n                    if (!that._isMobile()) {\n                        that._showCalendar();\n                    }\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-views > .k-button, .k-scheduler-refresh', function (e) {\n                    e.preventDefault();\n                    var name = $(this).attr(kendo.attr('name'));\n                    that.toolbar.find('.k-scheduler-views > .k-button').removeClass(FOCUSEDSTATE);\n                    if (!that.trigger('navigate', {\n                            view: name,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(name);\n                    }\n                });\n                toolbar.on(CHANGE + NS, '.k-views-dropdown, .k-scheduler-mobile-views', function () {\n                    var name = this.value;\n                    if (!that.trigger('navigate', {\n                            view: name,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(name);\n                    }\n                });\n            },\n            _showCalendar: function (targetElm) {\n                var that = this, target = targetElm || that.toolbar.find('.k-nav-current'), html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n                if (!that.popup) {\n                    that.popup = new Popup(html, {\n                        anchor: target,\n                        activate: function () {\n                            if (that.popup && that.calendar) {\n                                that.popup._toggleResize(false);\n                                that.calendar.element.find('table').focus();\n                                that.popup._toggleResize(true);\n                            }\n                        },\n                        open: function () {\n                            if (!that.calendar) {\n                                that.calendar = new Calendar(this.element.find('.k-scheduler-calendar'), {\n                                    change: function () {\n                                        var date = this.value();\n                                        if (!that.trigger('navigate', {\n                                                view: that._selectedViewName,\n                                                action: 'changeDate',\n                                                date: date\n                                            })) {\n                                            that.date(date);\n                                            that.popup.close();\n                                        }\n                                        if (!that._isMobile()) {\n                                            that._selectedView.element.focus();\n                                            that.toolbar.find('.k-nav-current').focus().addClass(FOCUSEDSTATE);\n                                        }\n                                    },\n                                    min: that.options.min,\n                                    max: that.options.max\n                                });\n                            }\n                            that.calendar.element.on('keydown' + NS, function (e) {\n                                if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                    that.popup.close();\n                                    that._selectedView.element.focus();\n                                    that.toolbar.find('.k-nav-current').focus().addClass(FOCUSEDSTATE);\n                                }\n                            });\n                            that.calendar.value(that.date());\n                        },\n                        copyAnchorStyles: false\n                    });\n                }\n                that.popup.open();\n            },\n            refresh: function (e) {\n                var that = this;\n                var view = this.view();\n                var preventRefresh = e && e.action === 'itemchange' && (this._editor.editable || this._preventRefresh) || this.dataSource.options.type === 'signalr' && this._preventRefresh;\n                this._progress(false);\n                this.angular('cleanup', function () {\n                    return { elements: that.items() };\n                });\n                e = e || {};\n                if (!view) {\n                    return;\n                }\n                if (preventRefresh) {\n                    this._attemptRefresh = true && this.dataSource.options.type === 'signalr';\n                    return;\n                }\n                if (this.trigger('dataBinding', {\n                        action: e.action || 'rebind',\n                        index: e.index,\n                        items: e.items\n                    })) {\n                    return;\n                }\n                if (!(e && e.action === 'resize') && this._editor) {\n                    this._editor.close();\n                }\n                this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n                view.refreshLayout();\n                view.render(this._data);\n                this.trigger('dataBound');\n                this._attemptRefresh = false;\n            },\n            slotByPosition: function (x, y) {\n                var view = this.view();\n                if (!view._slotByPosition) {\n                    return null;\n                }\n                var slot = view._slotByPosition(x, y);\n                if (!slot) {\n                    return null;\n                }\n                return {\n                    startDate: slot.startDate(),\n                    endDate: slot.endDate(),\n                    groupIndex: slot.groupIndex,\n                    element: slot.element,\n                    isDaySlot: slot.isDaySlot\n                };\n            },\n            slotByElement: function (element) {\n                var offset = $(element).offset();\n                return this.slotByPosition(offset.left, offset.top);\n            },\n            resourcesBySlot: function (slot) {\n                return this.view()._resourceBySlot(slot);\n            }\n        });\n        var defaultViews = {\n            day: { type: 'kendo.ui.DayView' },\n            week: { type: 'kendo.ui.WeekView' },\n            workWeek: { type: 'kendo.ui.WorkWeekView' },\n            agenda: { type: 'kendo.ui.AgendaView' },\n            month: { type: 'kendo.ui.MonthView' },\n            timeline: { type: 'kendo.ui.TimelineView' },\n            timelineWeek: { type: 'kendo.ui.TimelineWeekView' },\n            timelineWorkWeek: { type: 'kendo.ui.TimelineWorkWeekView' },\n            timelineMonth: { type: 'kendo.ui.TimelineMonthView' }\n        };\n        ui.plugin(Scheduler);\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Scheduler.prototype);\n            var SCHEDULER_EXPORT = 'k-scheduler-pdf-export';\n            Scheduler.fn._drawPDF = function (progress) {\n                var wrapper = this.wrapper;\n                var styles = wrapper[0].style.cssText;\n                wrapper.css({\n                    width: wrapper.width(),\n                    height: wrapper.height()\n                });\n                wrapper.addClass(SCHEDULER_EXPORT);\n                var scheduler = this;\n                var promise = new $.Deferred();\n                var table = wrapper.find('.k-scheduler-content').find('table').css('table-layout', 'auto');\n                setTimeout(function () {\n                    table.css('table-layout', 'fixed');\n                    scheduler.resize(true);\n                    scheduler._drawPDFShadow({}, { avoidLinks: scheduler.options.pdf.avoidLinks }).done(function (group) {\n                        var args = {\n                            page: group,\n                            pageNumber: 1,\n                            progress: 1,\n                            totalPages: 1\n                        };\n                        progress.notify(args);\n                        promise.resolve(args.page);\n                    }).fail(function (err) {\n                        promise.reject(err);\n                    }).always(function () {\n                        wrapper[0].style.cssText = styles;\n                        wrapper.removeClass(SCHEDULER_EXPORT);\n                        scheduler.resize(true);\n                        scheduler.resize(true);\n                    });\n                });\n                return promise;\n            };\n        }\n        var TimezoneEditor = Widget.extend({\n            init: function (element, options) {\n                var that = this, zones = kendo.timezone.windows_zones;\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n                Widget.fn.init.call(that, element, options);\n                that.wrapper = that.element;\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitleId = kendo.guid();\n                that._zoneTitlePicker();\n                that._zonePicker();\n                that._zoneTitle.bind('cascade', function () {\n                    if (!this.value()) {\n                        that._zone.wrapper.hide();\n                    }\n                });\n                that._zone.bind('cascade', function () {\n                    that._value = this.value();\n                    that.trigger('change');\n                });\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'TimezoneEditor',\n                value: '',\n                optionLabel: 'No timezone'\n            },\n            events: ['change'],\n            _zoneTitlePicker: function () {\n                var that = this, zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n                that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                    dataSource: kendo.timezone.zones_titles,\n                    dataValueField: 'other_zone',\n                    dataTextField: 'name',\n                    optionLabel: that.options.optionLabel\n                });\n            },\n            _zonePicker: function () {\n                var that = this, zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n                that._zone = new kendo.ui.DropDownList(zone, {\n                    dataValueField: 'zone',\n                    dataTextField: 'territory',\n                    dataSource: that._zonesQuery.data,\n                    cascadeFrom: that._zoneTitleId,\n                    dataBound: function () {\n                        that._value = this.value();\n                        this.wrapper.toggle(this.dataSource.view().length > 1);\n                    }\n                });\n                that._zone.wrapper.hide();\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n                var that = this, zone;\n                if (value === undefined) {\n                    return that._value;\n                }\n                zone = that._zonesQuery.filter({\n                    field: 'zone',\n                    operator: 'eq',\n                    value: value\n                }).data[0];\n                if (zone) {\n                    that._zoneTitle.value(zone.other_zone);\n                    that._zone.value(zone.zone);\n                } else {\n                    that._zoneTitle.select(0);\n                }\n            }\n        });\n        ui.plugin(TimezoneEditor);\n        var ZONETITLEOPTIONTEMPLATE = kendo.template('<option value=\"#=other_zone#\">#=name#</option>');\n        var ZONEOPTIONTEMPLATE = kendo.template('<option value=\"#=zone#\">#=territory#</option>');\n        var MobileTimezoneEditor = Widget.extend({\n            init: function (element, options) {\n                var that = this, zones = kendo.timezone.windows_zones;\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n                Widget.fn.init.call(that, element, options);\n                that.wrapper = that.element;\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitlePicker();\n                that._zonePicker();\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'MobileTimezoneEditor',\n                optionLabel: 'No timezone',\n                value: ''\n            },\n            events: ['change'],\n            _bindZones: function (value) {\n                var data = value ? this._filter(value) : [];\n                this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n            },\n            _filter: function (value) {\n                return this._zonesQuery.filter({\n                    field: 'other_zone',\n                    operator: 'eq',\n                    value: value\n                }).data;\n            },\n            _options: function (data, template, optionLabel) {\n                var idx = 0;\n                var html = '';\n                var length = data.length;\n                if (optionLabel) {\n                    html += template({\n                        other_zone: '',\n                        name: optionLabel\n                    });\n                }\n                for (; idx < length; idx++) {\n                    html += template(data[idx]);\n                }\n                return html;\n            },\n            _zoneTitlePicker: function () {\n                var that = this;\n                var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n                that._zoneTitle = $('<select>' + options + '</select>').appendTo(that.wrapper).change(function () {\n                    var value = this.value;\n                    var zone = that._zonePickerLabel;\n                    var zoneSelect = zone.find('select');\n                    that._bindZones(value);\n                    if (value && zoneSelect.children().length > 1) {\n                        zone.show();\n                    } else {\n                        zone.hide();\n                    }\n                    that._value = that._zone[0].value;\n                    that.trigger('change');\n                });\n            },\n            _zonePicker: function () {\n                var that = this;\n                that._zonePickerLabel = $('<li class=\\'k-item k-listgroup-item k-zonepicker\\' style=\\'display:none\\'>' + '<label class=\\'k-label k-listgroup-form-row\\'>' + '<span class=\\'k-item-title k-listgroup-form-field-label\\'></span>' + '<div class=\\'k-listgroup-form-field-wrapper\\'></div>' + '</label>' + '</li>');\n                that._zone = $('<select></select>').appendTo(that._zonePickerLabel.find('div')).change(function () {\n                    that._value = this.value;\n                    that.trigger('change');\n                });\n                this.wrapper.closest('.k-item').after(that._zonePickerLabel);\n                that._bindZones(that._zoneTitle.val());\n                that._value = that._zone[0].value;\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n                var that = this;\n                var zonePicker = that._zone;\n                var other_zone = '';\n                var zone_value = '';\n                var zone;\n                if (value === undefined) {\n                    return that._value;\n                }\n                zone = that._zonesQuery.filter({\n                    field: 'zone',\n                    operator: 'eq',\n                    value: value\n                }).data[0];\n                if (zone) {\n                    zone_value = zone.zone;\n                    other_zone = zone.other_zone;\n                }\n                that._zoneTitle.val(other_zone);\n                that._bindZones(other_zone);\n                zonePicker.val(zone_value);\n                zone_value = zonePicker[0].value;\n                if (zone_value && zonePicker.children.length > 1) {\n                    that._zonePickerLabel.show();\n                } else {\n                    that._zonePickerLabel.hide();\n                }\n                that._value = zone_value;\n            }\n        });\n        ui.plugin(MobileTimezoneEditor);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}