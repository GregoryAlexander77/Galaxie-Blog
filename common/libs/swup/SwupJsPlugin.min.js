(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define([],r);else if(typeof exports==="object")exports["SwupJsPlugin"]=r();else t["SwupJsPlugin"]=r()})(window,function(){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=true;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=0)}([function(e,t,r){"use strict";var n=r(1);var o=i(n);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(2);var a=s(i);var u=r(3);var f=s(u);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};c(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.name="JsPlugin";r.currentAnimation=null;r.getAnimationPromises=function(e){var t=r.getAnimationIndex(e);return[r.createAnimationPromise(t,e)]};r.createAnimationPromise=function(e,t){var n=r.swup.transition;var o=r.options[e];return new Promise(function(e){o[t](e,{paramsFrom:o.regFrom.exec(n.from),paramsTo:o.regTo.exec(n.to),transition:n,from:o.from,to:o.to})})};r.getAnimationIndex=function(e){if(e==="in"){return r.currentAnimation}var t=r.options;var n=0;var o=0;Object.keys(t).forEach(function(e,i){var a=t[e];var u=r.rateAnimation(a);if(u>=o){n=i;o=u}});r.currentAnimation=n;return r.currentAnimation};r.rateAnimation=function(e){var t=r.swup.transition;var n=0;var o=e.regFrom.test(t.from);var i=e.regTo.test(t.to);n+=o?1:0;n+=i?1:0;n+=o&&e.to===t.custom?2:0;return n};var o=[{from:"(.*)",to:"(.*)",out:function e(t){return t()},in:function e(t){return t()}}];r.options=n({},o,e);r.generateRegex();return r}o(t,[{key:"mount",value:function e(){var t=this.swup;t._getAnimationPromises=t.getAnimationPromises;t.getAnimationPromises=this.getAnimationPromises}},{key:"unmount",value:function e(){swup.getAnimationPromises=swup._getAnimationPromises;swup._getAnimationPromises=null}},{key:"generateRegex",value:function e(){var t=this;var r=function e(t){return t instanceof RegExp};this.options=Object.keys(this.options).map(function(e){return n({},t.options[e],{regFrom:r(t.options[e].from)?t.options[e].from:(0,f.default)(t.options[e].from),regTo:r(t.options[e].to)?t.options[e].to:(0,f.default)(t.options[e].to)})})}}]);return t}(a.default);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(){o(this,e);this.isSwupPlugin=true}n(e,[{key:"mount",value:function e(){}},{key:"unmount",value:function e(){}}]);return e}();t.default=i},function(e,t){e.exports=m;e.exports.parse=o;e.exports.compile=i;e.exports.tokensToFunction=a;e.exports.tokensToRegExp=v;var r="/";var n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function o(e,t){var o=[];var i=0;var a=0;var s="";var c=t&&t.delimiter||r;var l=t&&t.whitelist||undefined;var p=false;var v;while((v=n.exec(e))!==null){var m=v[0];var g=v[1];var d=v.index;s+=e.slice(a,d);a=d+m.length;if(g){s+=g[1];p=true;continue}var y="";var h=v[2];var b=v[3];var x=v[4];var w=v[5];if(!p&&s.length){var P=s.length-1;var j=s[P];var _=l?l.indexOf(j)>-1:true;if(_){y=j;s=s.slice(0,P)}}if(s){o.push(s);s="";p=false}var O=w==="+"||w==="*";var A=w==="?"||w==="*";var E=b||x;var T=y||c;o.push({name:h||i++,prefix:y,delimiter:T,optional:A,repeat:O,pattern:E?f(E):"[^"+u(T===c?T:T+c)+"]+?"})}if(s||a<e.length){o.push(s+e.substr(a))}return o}function i(e,t){return a(o(e,t))}function a(e){var t=new Array(e.length);for(var r=0;r<e.length;r++){if(typeof e[r]==="object"){t[r]=new RegExp("^(?:"+e[r].pattern+")$")}}return function(r,n){var o="";var i=n&&n.encode||encodeURIComponent;for(var a=0;a<e.length;a++){var u=e[a];if(typeof u==="string"){o+=u;continue}var f=r?r[u.name]:undefined;var s;if(Array.isArray(f)){if(!u.repeat){throw new TypeError('Expected "'+u.name+'" to not repeat, but got array')}if(f.length===0){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var c=0;c<f.length;c++){s=i(f[c],u);if(!t[a].test(s)){throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"')}o+=(c===0?u.prefix:u.delimiter)+s}continue}if(typeof f==="string"||typeof f==="number"||typeof f==="boolean"){s=i(String(f),u);if(!t[a].test(s)){throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+s+'"')}o+=u.prefix+s;continue}if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function f(e){return e.replace(/([=!:$/()])/g,"\\$1")}function s(e){return e&&e.sensitive?"":"i"}function c(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r){for(var n=0;n<r.length;n++){t.push({name:n,prefix:null,delimiter:null,optional:false,repeat:false,pattern:null})}}return e}function l(e,t,r){var n=[];for(var o=0;o<e.length;o++){n.push(m(e[o],t,r).source)}return new RegExp("(?:"+n.join("|")+")",s(r))}function p(e,t,r){return v(o(e,r),t,r)}function v(e,t,n){n=n||{};var o=n.strict;var i=n.start!==false;var a=n.end!==false;var f=n.delimiter||r;var c=[].concat(n.endsWith||[]).map(u).concat("$").join("|");var l=i?"^":"";for(var p=0;p<e.length;p++){var v=e[p];if(typeof v==="string"){l+=u(v)}else{var m=v.repeat?"(?:"+v.pattern+")(?:"+u(v.delimiter)+"(?:"+v.pattern+"))*":v.pattern;if(t)t.push(v);if(v.optional){if(!v.prefix){l+="("+m+")?"}else{l+="(?:"+u(v.prefix)+"("+m+"))?"}}else{l+=u(v.prefix)+"("+m+")"}}}if(a){if(!o)l+="(?:"+u(f)+")?";l+=c==="$"?"$":"(?="+c+")"}else{var g=e[e.length-1];var d=typeof g==="string"?g[g.length-1]===f:g===undefined;if(!o)l+="(?:"+u(f)+"(?="+c+"))?";if(!d)l+="(?="+u(f)+"|"+c+")"}return new RegExp(l,s(n))}function m(e,t,r){if(e instanceof RegExp){return c(e,t)}if(Array.isArray(e)){return l(e,t,r)}return p(e,t,r)}}])});